2001-05-23  Bruno Haible  <haible@clisp.cons.org>

	* gettext-0.10.38 released.

2001-05-22  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.in (install-data): Install plural.c as well.
	(uninstall): Uninstall plural.c as well.

2001-05-18  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.in (dist): Don't assume $(srcdir) = ".". Distribute
	file in either current directory or $(srcdir), whichever exists.

2001-05-11  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.in (install-exec): Don't install charset.alias on glibc 2.1
	systems.

2001-04-30  Bruno Haible  <haible@clisp.cons.org>

	* dcigettext.c (getuid, getgid, geteuid, getegid): Provide default
	definitions. Needed for mingw32.

2001-04-19  Bruno Haible  <haible@clisp.cons.org>

	* gettext-0.10.37 released.

2001-04-19  Bruno Haible <haible@clisp.cons.org>

	* Makefile.in (LTV_CURRENT, LTV_REVISION, LTV_AGE): Bump to 1:1:0.

2001-04-19  Bruno Haible <haible@clisp.cons.org>

	* loadmsgcat.c (_nl_init_domain_conv): Don't append //TRANSLIT when
	the libiconv version is smaller than 1.5.

2001-04-09  Bruno Haible <haible@clisp.cons.org>

	* loadmsgcat.c: Don't use GNU C extensions if __APPLE_CC__ is defined.
	Apple's MacOS X compiler has not all the features that the regular
	GCC with the same version number has.

2001-04-07  Bruno Haible <haible@clisp.cons.org>

	* gettextP.h (struct loaded_domain): Add codeset_cntr field.
	(struct binding): Add codeset_cntr field.
	(_nl_load_domain): Add domainbinding argument.
	(_nl_init_domain_conv, _nl_free_domain_conv): New declarations.
	(_nl_find_msg): New declaration, moved here from loadinfo.h.
	* loadinfo.h (struct loaded_l10nfile): Remove domainbinding field.
	(_nl_make_l10nflist): Remove domainbinding argument.
	(_nl_find_msg): Move declaration to gettextP.h.
	* bindtextdom.c (set_binding_values): Initialize ->codeset_cntr to 0.
	Increment it when ->codeset is changed.
	* dcigettext.c (DCIGETTEXT): Pass binding to _nl_find_msg.
	(_nl_find_msg): Add domainbinding argument. Reinitialize the converter
	if domainbinding->codeset_cntr has been incremented.
	* finddomain.c (_nl_find_domain): Don't pass domainbinding to
	_nl_make_l10nflist(). Pass it to _nl_load_domain() instead.
	* l10nflist.c (_nl_make_l10nflist): Remove domainbinding argument.
	* loadmsgcat.c (_nl_init_domain_conv): New function, extracted from
	_nl_load_domain. Append //TRANSLIT also when using libiconv.
	(_nl_free_domain_conv): New function, extracted from _nl_unload_domain.
	(_nl_load_domain): Add domainbinding argument. Call
	_nl_init_domain_conv.
	(_nl_unload_domain): Call _nl_free_domain_conv.

2001-04-09  Bruno Haible  <haible@clisp.cons.org>

	* dcigettext.c (HAVE_LOCALE_NULL): Don't define if __GNU_LIBRARY__ < 2
	(Linux libc5).

2001-04-04  Bruno Haible  <haible@clisp.cons.org>

	* dcigettext.c (HAVE_LOCALE_NULL): Define also if __GNU_LIBRARY__.

2001-04-04  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.in (libdir, includedir, datadir): Use the autoconf
	determined value, in order to respect the configure arguments.
	(gettextsrcdir): Use $(datadir), not @datadir@.

2001-03-29  Bruno Haible  <haible@clisp.cons.org>

	* gettext-0.10.36 released.

2001-03-25  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.in (install-data): Set execution bits on installed
	config.charset.

2001-03-23  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.in (YACC): Use @INTLBISON@ instead of bison.

2001-03-21  Bruno Haible  <haible@clisp.cons.org>

	* dcigettext.c (_nl_state_lock): Mark as #ifdef _LIBC. AIX 3 xlc
	chokes on empty macro arguments.
	* plural.y: Add #pragma for alloca on AIX 3.

2001-03-20  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.in (DISTFILES.generated): New variable.
	(DISTFILES.gettext): Remove plural.c.
	(dist): Use DISTFILES.generated.
	(YACC): Use "bison -y" instead of @YACC@.
	Needed for "make dist" to work in normal packages.

2001-03-20  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.in (dist): Don't depend on $(DISTFILES). Instead, generate
	the files to be distributed through a recursive 'make' call.

2001-03-17  Bruno Haible  <haible@clisp.cons.org>

	* gettextP.h (struct expression): Add operators lnot, less_than,
	greater_than, less_or_equal, greater_or_equal. Replace args2/args3
	union by a 'nargs' counter and an 'args[]' array.
	* plural.y: Don't include stdarg.h.
	(new_exp): New function.
	(new_exp_0, new_exp_2, new_exp_3): Rewritten to call new_exp.
	(new_exp_1): New function.
	('?' ':'): Make right-associative.
	(EQUOP2): New token, replaces '=' and '!'.
	(CMPOP2): New token.
	(ADDOP2): New token, replaces '+' and '-'.
	(MULOP2): New token, replaces '*', '/' and '%'.
	('!'): New token.
	(exp): Add rules for CMPOP2 and '!'. Don't call YYABORT.
	(start): Call YYABORT here.
	(FREE_EXPRESSION): Update.
	(yylex): Don't skip "\\n". Recognize comparison and '!' operators.
	Update for new token symbols.
	* loadmsgcat.c (plvar, plone, germanic_plural, init_germanic_plural):
	Update.
	* dcigettext.c (_nl_find_msg): Optimize for space.
	(plural_eval): Recognize comparison and '!' operators. Optimize for
	space.

	* dcigettext.c (transcmp): New declaration.

2001-03-10  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.in (libintl.la): Pass -liconv and flag -no-undefined.
	Needed on platforms like BeOS.

	* Makefile.in (all-no-yes): Depend on libgnuintl.$la, not libintl.$la.
	(libgnuintl.a, libgnuintl.la): New targets. Needed for linking
	../tests/tstgettext on systems which have gettext() in libintl.so.

	* localcharset.c (locale_charset): Allow wildcard syntax. Resolve
	alias also if codeset is empty.
	* config.charset (BeOS): Use wildcard syntax.

	* loadmsgcat.c (_nl_load_domain): locale_charset() doesn't return NULL
	any more.

2001-03-09  Bruno Haible  <haible@clisp.cons.org>

	* config.charset: Update from libiconv-1.6.
	* localcharset.c: Likewise.

2001-02-25  Ulrich Drepper  <drepper@redhat.com>

	* locale.alias: Don't use nb_NO but define aliases for it.

2001-01-26  Ulrich Drepper  <drepper@redhat.com>

	* loadmsgcat.c: Include <locale.h> for _LIBC.

2001-03-09  Bruno Haible  <haible@clisp.cons.org>

	* dcigettext.c (transmem_block_t): Change to unsigned char, to avoid
	compiler warning.
	(_nl_find_msg): Add casts to avoid compiler warnings.

2001-03-09  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.in (DISTFILES.common): Remove ChangeLog.
	(DISTFILES.obsolete): New variable.
	(install-data): Install ChangeLog.inst as ChangeLog. Remove the files
	listed in DISTFILES.obsolete.
	(uninstall): Simplify.
	(distclean): Remove ChangeLog.inst.
	(dist): Mention ChangeLog explicitly.

2001-03-04  Bruno Haible  <haible@clisp.cons.org>
 
	* dcigettext.c (ISSLASH, HAS_DEVICE, IS_ABSOLUTE_PATH,
	IS_PATH_WITH_DIR): New macros.
	(DCIGETTEXT): Use IS_ABSOLUTE_PATH and IS_PATH_WITH_DIR. Increment
	path_max proportionally.
	* loadinfo.h (PATH_SEPARATOR): New macro.
	* l10nflist.c (_nl_make_l10nflist): Use PATH_SEPARATOR instead of ':'.
	* localealias.c (_nl_expand_alias): Likewise.
	* libgnuintl.h (gettext) [DJGPP]: Define as a macro as well.

2001-03-06  Bruno Haible  <haible@clisp.cons.org>

	* libgnuintl.h (LC_MESSAGES): Don't define on Solaris.

2001-02-24  Bruno Haible  <haible@clisp.cons.org>

	* dcigettext.c: Update comment about HAVE_LOCALE_NULL.

2001-02-05  Bruno Haible  <haible@clisp.cons.org>

	* libgnuintl.h (LC_MESSAGES): Provide a default value.

2001-01-30  Bruno Haible  <haible@clisp.cons.org>

	* config.charset: Update for FreeBSD 4.2.

2001-01-21  Bruno Haible  <haible@clisp.cons.org>

	Use libtool.
	* Makefile.in (l): Use INTL_LIBTOOL_SUFFIX_PREFIX instead of l.
	(all-no): When USE_INCLUDED_LIBINTL is 'no' but BUILD_INCLUDED_LIBINTL
	is 'yes', still build libintl.$la because the testsuite needs it.
	(libintl.la): Add $(CPPFLAGS) $(CFLAGS) $(XCFLAGS). Linking via $(CC)
	must use all $(CFLAGS).
	(install-exec): Use libtool to install libintl.$la.
	(uninstall): Use libtool to uninstall libintl.$la.
	(mostlyclean): Remove *.la and the .libs subdir.
	* intl-compat.c: Reorder. Add comment.

2001-01-20  Bruno Haible  <haible@clisp.cons.org>

	* loadmsgcat.c (O_BINARY): Define on platforms that don't have it.
	(_nl_load_domain): Open the catalog file in binary mode.

2001-01-24  Bruno Haible  <haible@clisp.cons.org>

	* gettextP.h (SWAP): Remove declaration, to work around a compilation
	failure on alphaev5-cray-unicosmk2.0.5.X.

2001-01-15  Bruno Haible  <haible@clisp.cons.org>

	* dcigettext.c (_nl_find_msg): Cast the second iconv() arg, to avoid
	a warning.

2001-01-07  Bruno Haible  <haible@clisp.cons.org>

	* gettextP.h (__gettextdebug): Remove declaration.
	(gettext_free_exp__, gettextparse__): New non-libc declarations.
	* plural.y [!_LIBC]: Define gettextparse__, gettext_free_exp__, not
	__gettextparse, __gettext_free_exp.
	* loadmsgcat.c [!_LIBC]: Use gettextparse__, not __gettextparse.

2001-01-07  Bruno Haible  <haible@clisp.cons.org>

	* libgnuintl.h: Renamed from intlh.inst.in.
	Remove comment about __builtin_constant_p.
	(gettext): Use NULL.
	* libgettext.h: Completely rewritten. Now a conditional wrapper around
	<libintl.h>. Keep the handling of ENABLE_NLS and gettext_noop, remove
	everything else.
	* gettextP.h: Include gettext.h, for nls_uint32.
	(gettext__, dgettext__, dcgettext__, textdomain__, bindtextdomain__,
	bind_textdomain_codeset__): New declarations, from old libgettext.h.
	* gettext.h: Don't include <stdio.h>.
	* Makefile.in (HEADERS): Add libgnuintl.h.
	(DISTFILES.gettext): Remove intlh.inst.in.
	(all-yes): Depend on libintl.h instead of intlh.inst.
	(libintl.h): New target. Create as a copy of libgnuintl.h.
	(intlh.inst): Remove target.
	(install-exec): Update.
	($(OBJECTS): Depend on libgnuintl.h, not libgettext.h.
	(mostlyclean): Remove libintl.h instead of intlh.inst.
	(dist-libc): Remove target.
	* bindtextdom.c: Include libgnuintl.h instead of libgettext.h. Don't
	include gettext.h.
	* dcgettext.c: Likewise.
	* dcigettext.c: Likewise.
	* dcngettext.c: Likewise.
	* dngettext.c: Likewise.
	* finddomain.c: Likewise.
	* ngettext.c: Likewise.
	* textdomain.c: Likewise.
	* dgettext.c: Include libgnuintl.h instead of libgettext.h. Include
	gettextP.h.
	* gettext.c: Likewise.
	* intl-compat.c: Likewise.
	* localealias.c: Don't include gettext.h.
	* plural.y: Likewise.

2001-01-07  Bruno Haible  <haible@clisp.cons.org>

	Assume <stddef.h>, <stdlib.h>, <string.h>, <locale.h> exist.
	* intlh.inst.in: Likewise.
	* libgettext.h: Likewise.
	* gettextP.h: Likewise.
	* bindtextdom.c: Likewise.
	* dcigettext.c: Likewise.
	* dgettext.c: Likewise.
	* dngettext.c: Likewise.
	* explodename.c: Likewise.
	* finddomain.c: Likewise.
	* gettext.c: Likewise.
	* l10nflist.c: Likewise.
	* loadmsgcat.c: Likewise.
	* localealias.c: Likewise.
	* ngettext.c: Likewise.
	* textdomain.c: Likewise.

2001-01-06  Bruno Haible  <haible@clisp.cons.org>

	Remove catgets fallback code.
	- It does not handle message clash prevention through domains and
	  dgettext().
	- It does not handle message catalog inheritance and the LANGUAGE
	  environment variable.
	- It does not handle locale aliases.
	- It does not handle automatic charset conversion.
	- It does not handle plural form handling and ngettext().
	- It uses a slow string to integer conversion.
	- It is sensitive against installation problems.
	* cat-compat.c: Remove file.
	* po2msg.sin, po2tbl.sin: Remove files.
	* Makefile.in (datadir): Assume DATADIRNAME = share.
	(SOURCES): Remove cat-compat.c.
	(DISTFILES.common): Remove po2msg.sin, po2tbl.sin.
	(distclean): No need to remove po2msg.sed, po2tbl.sed.
	(../po/cat-id-tbl.$lo): Remove rule.
	* libgettext.h (_msg_ent): Remove.
	(_msg_tbl, _msg_tbl_length): Remove declarations.
	(gettext, dgettext, ngettext, dngettext): Don't depend on
	!HAVE_CATGETS.

2001-01-04  Ulrich Drepper  <drepper@redhat.com>

	* plural.y (yylex): Minimal improvement in number scanner.

2001-01-02  Ulrich Drepper  <drepper@redhat.com>

	* dcigettext.c (guess_category_value): Rewrite so that LANGUAGE value
	is ignored if the selected locale is the C locale.

2000-11-20  Ulrich Drepper  <drepper@redhat.com>

	* dcigettext.c (transcmp): Make s1 and s2 const.
	* loadmsgcat.c (_nl_load_domain): Rearrange domain initialization to
	avoid warning.

2000-11-09  Ulrich Drepper  <drepper@redhat.com>

	* locale.alias: Add thai.
	Patch by Chanop Silpa-Anan <chanop@syseng.anu.edu.au>.

2001-01-05  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.in (INCLUDES): Remove reference to $(top_srcdir)/lib.
	(.SUFFIXES): Put .c before .y, so that Solaris "make" uses the .c.o
	rule, not the builtin .y.o rule.
	(.y.c): Use $< instead of $^. $^ is not supported by SUSV2 "make"
	specification. Remove $*.h explicitly: we don't need plural.h.
	* gettextP.h: Include <stddef.h>.
	(__gettext_free_exp, __gettextparse): Convert prototype to K&R C
	syntax.
	* bindtextdom.c (offsetof): Provide fallback for platforms that lack
	it, like SunOS4.
	(set_binding_values): Convert prototype to K&R C syntax.
	* cat-compat.c: Include stdlib.h, string.h whenever possible.
	* dcigettext.c: Ignore the value of C_ALLOCA, because libintl.a
	must not depend on external .o files.
	(offsetof): Provide fallback for platforms that lack it, like SunOS4.
	(transcmp): Convert to K&R C syntax.
	* explodename.c Include stdlib.h whenever possible.
	(_nl_find_language): Convert to K&R C syntax.
	* finddomain.c: Include stdlib.h whenever possible.
	* l10nflist.c Include stdlib.h whenever possible.
	(_nl_normalize_codeset): Use tolower, not _tolower.
	* loadmsgcat.c: Include stdlib.h whenever possible.
	Include headers needed for alloca().
	(freea): New macro.
	(_nl_load_domain): Add fallback code for platforms lacking strtoul,
	like SunOS4. Add fallback code for platforms lacking alloca.
	* localealias.c: Include stdlib.h whenever possible.
	(ADD_BLOCK, FREE_BLOCK): Remove macros.
	(freea): New macro.
	(read_alias_file): Simplify fallback code for platforms lacking alloca.
	* plural.y (new_exp_0, new_exp_2, new_exp_3): New functions.
	(new_exp): Remove function.
	(__gettext_free_exp, yylex, yyerror): Convert to K&R C syntax.
	* textdomain.c: Include stdlib.h whenever possible.
	* gettext.c: Likewise.
	* ngettext.c: Likewise.
	* localcharset.c (volatile): Define to empty if not using ANSI C.

2001-01-01  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.in (mostlyclean): Remove intlh.inst, charset.alias,
	ref-add.sed, ref-del.sed.
	(distclean): In the gettext package, remove VERSION.

2001-01-01  Bruno Haible  <haible@clisp.cons.org>

	Finish implementation of plural form handling.
	* dcigettext.c (known_translation_t): Rename 'domain' field to
	'domainname'. Remove 'plindex' field. Add 'domain' and
	'translation_length' fields.
	(transcmp): Don't compare 'plindex' fields.
	(plural_lookup): New function.
	(DCIGETTEXT): Change cache handing in the plural case. Don't call
	plural_eval before the translation and its catalog file have been
	found. Remove plindex from cache key. Add 'translation_length' and
	'domain' to cache result. 
	(_nl_find_msg): Remove index argument, return length of translation
	to the caller instead. Weaken comparison of string lengths, to account
	for plural entries. Call iconv() on the entire result string, not
	only on the portion needed so far.
	* loadinfo.h (_nl_find_msg): Remove index argument, add lengthp
	argument.
	* loadmsgcat.c (_nl_load_domain): Adapt to _nl_find_msg change.

	* intl-compat.c (dcngettext, dngettext, ngettext): New functions.
	* libgettext.h (ngettext__, dngettext__, dcngettext__): New
	declarations.
	(ngettext, dngettext): Add missing macro argument.

	* intlh.inst.in (ngettext, dngettext): Add missing macro argument.

2000-12-31  Bruno Haible  <haible@clisp.cons.org>

	* gettextP.h (ZERO): New macro.
	(struct binding): Always use ZERO.
	* bindtextdom.c (set_binding_values): Use offsetof, not sizeof.
	Include <stddef.h> whenever possible.
	* dcigettext.c (ZERO): Remove macro.
	(struct transmem_list): Use ZERO.
	(DCIGETTEXT): Use offsetof, not sizeof.
	Include <stddef.h> whenever possible.

	* config.charset: Update from libiconv-1.5.1.
	* localcharset.c: Likewise.

2000-12-30  Bruno Haible  <haible@clisp.cons.org>

	* locale.alias: New file, moved here from ../misc/locale.alias. Add
	"Packages using this file" line.
	* Makefile.in (DISTFILES.common): Add locale.alias.
	(install-exec, uninstall): Install/deinstall locale.alias.

2000-10-30  Ulrich Drepper  <drepper@redhat.com>

	* dcigettext.c (guess_category_value): For libc always use the
	setlocale() method.

2000-10-20  Ulrich Drepper  <drepper@redhat.com>

	* libintl.glibc (ngettext macro): Add missing parameter.
	(dngettext macro): Likewise.

2000-10-14  Ulrich Drepper  <drepper@redhat.com>

	* localealias.c (read_alias_file): Update string pointers in map[]
	if realloc() changed the values.
	Patch by Jakub Jelinek <jakub@redhat.com>.

2000-08-31  Ulrich Drepper  <drepper@redhat.com>

	* loadmsgcat.c: Use *stat64 instead of *stat internally.

	* dcigettext.c (free_mem): Correct freeing of _nl_domain_bindings
	list.

2000-08-27  Ulrich Drepper  <drepper@redhat.com>

	* dcigettext.c (DCIGETTEXT): Remove _nl_find_language in code to
	determine invalid locale name.

2000-08-20  Ulrich Drepper  <drepper@redhat.com>

	* dcigettext.c: Unify use of function aliases to make more compact
	PLT.

	* loadmsgcat.c (_nl_unload_domain): Also free conv_tab element.
	Pretty printing.
	* plural.y (new_exp): Take number of optional parameters in second
	parameter.  Test for correct number of parameters and free correctly
	in case of failure.  Adjust all callers.
	(yylex): Fix handling of '\0'.  Allow ';' as terminator character.

2000-07-14  Bruno Haible  <haible@clisp.cons.org>

	* dcigettext.c (dcigettext): Call plural_eval on all platforms, not
	only those having tsearch.

2000-06-30  Ulrich Drepper  <drepper@redhat.com>

	* dcigettext.c (_nl_find_msg): Correct reallocation of buffers in
	case the translation is too large.  Remember allocated memory blocks
	in a list.
	(free_mem): Free memory for translations.

2000-06-16  Ulrich Drepper  <drepper@redhat.com>

	* loadmsgcat.c (_nl_load_domain): Call norm_add_slashes with new
	parameter to always enable transliteration.

1998-10-20  Paul Eggert  <eggert@twinsun.com>

	* po2tbl.sin: Escape trigraphs.

2000-10-12  Bruno Haible  <haible@clisp.cons.org>

	* finddomain.c: Remove unneeded includes.

2000-10-12  Bruno Haible  <haible@clisp.cons.org>

	* localealias.c (memcpy): Return first argument, just like the real
	memcpy function does.
	* bindtextdom.c (memcpy): Likewise.
	* finddomain.c (memcpy): Likewise.
	* l10nflist.c (memcpy): Likewise.
	* textdomain.c (memcpy): Likewise.
	From Paul Eggert <eggert@twinsun.com>.

2000-09-29  Bruno Haible  <haible@clisp.cons.org>

	* libintl.glibc: Update from current glibc version.

2000-09-18  Bruno Haible  <haible@clisp.cons.org>

	* dcigettext.c: Outside libc, use local variable names that don't
	clash with those in libc.
	* bindtextdom.c: Likewise.
	* textdomain.c: Likewise.

2000-07-31  Bruno Haible  <haible@clisp.cons.org>

	* plural.y: Include config.h. Needed to define 'inline' away for C
	compilers that don't support it.
	(yylex): Don't use gcc specific case range syntax.
	* loadmsgcat.y (INIT_GERMANIC_PLURAL): New macro, for old compilers.

2000-07-28  Bruno Haible  <haible@clisp.cons.org>

	Simplification: In all cases where $(gnulocaledir) is used, it is
	identical to $(localedir).
	* Makefile.in (DEFS): Remove setting for GNULOCALEDIR.
	* dcigettext.c (_nl_default_dirname): Initialize with LOCALEDIR.

2000-07-28  Bruno Haible  <haible@clisp.cons.org>

	* xopen-msg.sed: Renamed to ...
	* po2msg.sin: ... here.
	* linux-msg.sed: Remove file.
	* Makefile.in (DISTFILES.common): Update.

2000-07-28  Bruno Haible  <haible@clisp.cons.org>

	* po2tbl.sed.in: Renamed to ...
	* po2tbl.sin: ... here.
	* Makefile.in (DISTFILES.common): Update.

2000-07-28  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.in (uninstall): Synchronize with the install target.
	Really remove charset.alias when its reference count drops to 0.

2000-07-28  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.in (mkinstalldirs): New macro. Needed when configured with
	--srcdir=<relative pathname>; then ac_aux_dir will be a relative
	pathname rooted at the top builddir, and @MKINSTALLDIRS@ likewise.
	(install-exec, install-data): Use it.

2000-07-26  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.in (install-exec, install-data): Use $(SHELL) for calling
	$(MKINSTALLDIRS), don't rely on its execution permissions.

	* Makefile.in (LTV_CURRENT, LTV_REVISION, LTV_AGE): New variables.
	(libintl.la): Use them.

	* Makefile.in (install-exec, install-data, uninstall): Provide DESTDIR
	support, as recommended by GNU standards. Fix misapplied 2000-06-16
	patch.

2000-06-16  Bruno Haible  <haible@clisp.cons.org>

	* Makefile.in (COMSRCS): Add localcharset.c.
	(OBJECTS): Add localcharset.$lo.
	(DISTFILES.common): Add config.charset, ref-{add,del}.sin.
	(DEFS): Add -DLIBDIR.
	(all-yes): Add charset.alias, ref-{add,del}.sed.
	(.SUFFIXES): Add .sin and .sed.
	(.sin.sed, charset.alias): New rules.
	(install-exec, uninstall): Install/deinstall charset.alias.
	* localcharset.c: New file, from fileutils-4.0u.
	* config.charset: New file, from fileutils-4.0u.
	* red-add.sin, ref-del.sin: New files, from fileutils-4.0u.

	* intlh.inst.in (bind_textdomain_codeset): New declaration.
	* libgettext.h (bind_textdomain_codeset, bind_textdomain_codeset__):
	New declarations.
	(bind_textdomain_codeset) [!ENABLE_NLS]: New macro.
	* cat-compat.c (bind_textdomain_codeset): New function.
	* intl-compat.c (bind_textdomain_codeset): New function.

	* libgettext.h (ngettext, dngettext, dcngettext): New
	declarations.
	(dcgettext): Remove macro definition.
	(textdomain, bindtextdomain) [!ENABLE_NLS]: Parenthesize argument.
	* intlh.inst.in (ngettext, dngettext, dcngettext): New
	declarations.
	(dcgettext): Remove macro definition.

	* *.h, *.c, *.y: Change copyright notice from LGPL to GPL.

2000-05-21  Ulrich Drepper  <drepper@redhat.com>

	* dcigettext.c: Fix typo in comment.

2000-05-08  Andreas Jaeger  <aj@suse.de>

	* bindtextdom.c (set_binding_values): Add prototype.

2000-05-05  Bruno Haible  <haible@clisp.cons.org>

	* dcigettext.c (alignof): New macro.
	(_nl_find_msg): Use it instead of __alignof__. Pass correct output
	buffer length to __gconv/iconv. If malloc (freemem_size) fails, set
	freemem_size to 0.

2000-05-05  Bruno Haible  <haible@clisp.cons.org>

	* dcigettext.c (dcigettext): Fix interpretation of tsearch
	return value.

2000-05-06  Ulrich Drepper  <drepper@redhat.com>

	* dcigettext.c (DCIGETTEXT): Always define local variable `index'.
	(mempcpy): Correct typo in parameter list.

	* hash-string.h: Don't include <values.h>.

	* *.c, *.h, *.y: Update from glibc version.

1998-04-29  Paul Eggert  <eggert@twinsun.com>

	* Makefile.in (aliaspath): Don't put `.' at the end.

1998-06-01  Ulrich Drepper  <drepper@cygnus.com>

	* localealias.c (read_alias_file): Undo last change.
	* l10nflist.c (_nl_normalize_codeset): Likewise.
	* loadinfo.h: Likewise.

1998-05-23  Ulrich Drepper  <drepper@cygnus.com>

	* dcgettext.c: Don't use any alloca hack when C_ALLOCA is defined.

1998-05-01 08:47  Ulrich Drepper  <drepper@cygnus.com>

	* gettext-0.10.35 released.

1998-04-29  Ulrich Drepper  <drepper@cygnus.com>

	* intl/localealias.c (read_alias_file): Use unsigned char for
	local variables.  Remove unused variable tp.
	* intl/l10nflist.c (_nl_normalize_codeset): Use unsigned char *
	for type of codeset.  For loosing Solaris systems.
	* intl/loadinfo.h: Adapt prototype of _nl_normalize_codeset.
	* intl/bindtextdom.c (BINDTEXTDOMAIN): Don't define local variable
	len if not needed.
	Patches by Jim Meyering.

1998-04-28  Ulrich Drepper  <drepper@cygnus.com>

	* loadmsgcat.c (_nl_load_domain): Don't assign the element use_mmap if
	mmap is not supported.

	* hash-string.h: Don't include <values.h>.

1998-04-27  Ulrich Drepper  <drepper@cygnus.com>

	* textdomain.c: Use strdup is available.

	* localealias.c: Define HAVE_MEMPCPY so that we can use this
	function.  Define and use semapahores to protect modfication of
	global objects when compiling for glibc.  Add code to allow
	freeing alias table.

	* l10nflist.c: Don't assume stpcpy not being a macro.

	* gettextP.h: Define internal_function macri if not already done.
	Use glibc byte-swap macros instead of defining SWAP when compiled
	for glibc.
	(struct loaded_domain): Add elements to allow unloading.

	* Makefile.in (distclean): Don't remove libintl.h here.

	* bindtextdomain.c: Carry over changes from glibc.  Use strdup if
	available.

	* dcgettext.c: Don't assume stpcpy not being a macro.  Mark internal
	functions.  Add memory freeing code for glibc.

	* dgettext.c: Update copyright.

	* explodename.c: Include stdlib.h and string.h only if they exist.
	Use strings.h eventually.

	* finddomain.c: Mark internal functions.  Use strdup if available.
	Add memory freeing code for glibc.

1997-10-10 20:00  Ulrich Drepper  <drepper@cygnus.com>

	* libgettext.h: Fix dummy textdomain and bindtextdomain macros.
	They should return reasonable values.
	Reported by Tom Tromey <tromey@cygnus.com>.

1997-09-16 03:33  Ulrich Drepper  <drepper@cygnus.com>

	* libgettext.h: Define PARAMS also to `args' if __cplusplus is defined.
	* intlh.inst.in: Likewise.
	Reported by Jean-Marc Lasgouttes <Jean-Marc.Lasgouttes@inria.fr>.

	* libintl.glibc: Update from current glibc version.

1997-09-06 02:10  Ulrich Drepper  <drepper@cygnus.com>

	* intlh.inst.in: Reformat copyright.

1997-08-19 15:22  Ulrich Drepper  <drepper@cygnus.com>

	* dcgettext.c (DCGETTEXT): Remove wrong comment.

1997-08-16 00:13  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile.in (install-data): Don't change directory to install.

1997-08-01 14:30  Ulrich Drepper  <drepper@cygnus.com>

	* cat-compat.c: Fix copyright.

	* localealias.c: Don't define strchr unless !HAVE_STRCHR.

	* loadmsgcat.c: Update copyright.  Fix typos.

	* l10nflist.c: Don't define strchr unless !HAVE_STRCHR.
	(_nl_make_l10nflist): Handle sponsor and revision correctly.

	* gettext.c: Update copyright.
	* gettext.h: Likewise.
	* hash-string.h: Likewise.

	* finddomain.c: Remoave dead code.  Define strchr only if
	!HAVE_STRCHR.

	* explodename.c: Include <sys/types.h>.

	* explodename.c: Reformat copyright text.
	(_nl_explode_name): Fix typo.

	* dcgettext.c: Define and use __set_errno.
	(guess_category_value): Don't use setlocale if HAVE_LC_MESSAGES is
	not defined.

	* bindtextdom.c: Pretty printing.

1997-05-01 02:25  Ulrich Drepper  <drepper@cygnus.com>

	* dcgettext.c (guess_category_value): Don't depend on
	HAVE_LC_MESSAGES.  We don't need the macro here.
	Patch by Bruno Haible <haible@ilog.fr>.

	* cat-compat.c (textdomain): DoN't refer to HAVE_SETLOCALE_NULL
	macro.  Instead use HAVE_LOCALE_NULL and define it when using
	glibc, as in dcgettext.c.
	Patch by Bruno Haible <haible@ilog.fr>.

	* Makefile.in (CPPFLAGS): New variable.  Reported by Franc,ois
	Pinard.

Mon Mar 10 06:51:17 1997  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile.in: Implement handling of libtool.

	* gettextP.h: Change data structures for use of generic lowlevel
	i18n file handling.

Wed Dec  4 20:21:18 1996  Ulrich Drepper  <drepper@cygnus.com>

	* textdomain.c: Put parentheses around arguments of memcpy macro
	definition.
	* localealias.c: Likewise.
	* l10nflist.c: Likewise.
	* finddomain.c: Likewise.
	* bindtextdom.c: Likewise.
	Reported by Thomas Esken.

Mon Nov 25 22:57:51 1996  Ulrich Drepper  <drepper@cygnus.com>

	* textdomain.c: Move definition of `memcpy` macro to right
	position.

Fri Nov 22 04:01:58 1996  Ulrich Drepper  <drepper@cygnus.com>

	* finddomain.c [!HAVE_STRING_H && !_LIBC]: Define memcpy using
 	bcopy if not already defined.  Reported by Thomas Esken.
	* bindtextdom.c: Likewise.
	* l10nflist.c: Likewise.
	* localealias.c: Likewise.
	* textdomain.c: Likewise.

Tue Oct 29 11:10:27 1996  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile.in (libdir): Change to use exec_prefix instead of
 	prefix.  Reported by Knut-HåvardAksnes <etokna@eto.ericsson.se>.

Sat Aug 31 03:07:09 1996  Ulrich Drepper  <drepper@cygnus.com>

	* l10nflist.c (_nl_normalize_codeset): We convert to lower case,
	so don't prepend uppercase `ISO' for only numeric arg.

Fri Jul 19 00:15:46 1996  Ulrich Drepper  <drepper@cygnus.com>

	* l10nflist.c: Move inclusion of argz.h, ctype.h, stdlib.h after
	definition of _GNU_SOURCE.  Patch by Roland McGrath.

	* Makefile.in (uninstall): Fix another bug with `for' loop and
	empty arguments.  Patch by Jim Meyering.  Correct name os
	uninstalled files: no intl- prefix anymore.

	* Makefile.in (install-data): Again work around shells which
	cannot handle mpty for list.  Reported by Jim Meyering.

Sat Jul 13 18:11:35 1996  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile.in (install): Split goal.  Now depend on install-exec
        and install-data.
	(install-exec, install-data): New goals.  Created from former
	install goal.
	Reported by Karl Berry.

Sat Jun 22 04:58:14 1996  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile.in (MKINSTALLDIRS): New variable.  Path to
        mkinstalldirs script.
	(install): use MKINSTALLDIRS variable or if the script is not present
	try to find it in the $top_scrdir).

Wed Jun 19 02:56:56 1996  Ulrich Drepper  <drepper@cygnus.com>

	* l10nflist.c: Linux libc *partly* includes the argz_* functions.
	Grr.  Work around by renaming the static version and use macros
	for renaming.

Tue Jun 18 20:11:17 1996  Ulrich Drepper  <drepper@cygnus.com>

	* l10nflist.c: Correct presence test macros of __argz_* functions.

	* l10nflist.c: Include <argz.h> based on test of it instead when
	__argz_* functions are available.
	Reported by Andreas Schwab.

Thu Jun 13 15:17:44 1996  Ulrich Drepper  <drepper@cygnus.com>

	* explodename.c, l10nflist.c: Define NULL for dumb systems.

Tue Jun 11 17:05:13 1996  Ulrich Drepper  <drepper@cygnus.com>

	* intlh.inst.in, libgettext.h (dcgettext): Rename local variable
	result to __result to prevent name clash.

	* l10nflist.c, localealias.c, dcgettext.c: Define _GNU_SOURCE to
        get prototype for stpcpy and strcasecmp.

	* intlh.inst.in, libgettext.h: Move declaration of
	`_nl_msg_cat_cntr' outside __extension__ block to prevent warning
	from gcc's -Wnested-extern option.

Fri Jun  7 01:58:00 1996  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile.in (install): Remove comment.

Thu Jun  6 17:28:17 1996  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile.in (install): Work around for another Buglix stupidity.
	Always use an `else' close for `if's.  Reported by Nelson Beebe.

	* Makefile.in (intlh.inst): Correct typo in phony rule.
	Reported by Nelson Beebe.

Thu Jun  6 01:49:52 1996  Ulrich Drepper  <drepper@cygnus.com>

	* dcgettext.c (read_alias_file): Rename variable alloca_list to
	block_list as the macro calls assume.
	Patch by Eric Backus.

	* localealias.c [!HAVE_ALLOCA]: Define alloca as macro using
        malloc.
	(read_alias_file): Rename varriabe alloca_list to block_list as the
	macro calls assume.
	Patch by Eric Backus.

	* l10nflist.c: Correct conditional for <argz.h> inclusion.
	Reported by Roland McGrath.

	* Makefile.in (all): Depend on all-@USE_INCLUDED_LIBINTL@, not
        all-@USE_NLS@.

	* Makefile.in (install): intlh.inst comes from local dir, not
        $(srcdir).

	* Makefile.in (intlh.inst): Special handling of this goal.  If
	used in gettext, this is really a rul to construct this file.  If
	used in any other package it is defined as a .PHONY rule with
	empty body.

	* finddomain.c: Extract locale file information handling into
	l10nfile.c.  Rename local stpcpy__ function to stpcpy.

	* dcgettext.c (stpcpy): Add local definition.

	* l10nflist.c: Solve some portability problems.  Patches partly by
	Thomas Esken.  Add local definition of stpcpy.

Tue Jun  4 02:47:49 1996  Ulrich Drepper  <drepper@cygnus.com>

	* intlh.inst.in: Don't depend including <locale.h> on
	HAVE_LOCALE_H.  Instead configure must rewrite this fiile
	depending on the result of the configure run.

	* Makefile.in (install): libintl.inst is now called intlh.inst.
	Add rules for updating intlh.inst from intlh.inst.in.

	* libintl.inst: Renamed to intlh.inst.in.

	* localealias.c, dcgettext.c [__GNUC__]: Define HAVE_ALLOCA to 1
        because gcc has __buitlin_alloca.
	Reported by Roland McGrath.

Mon Jun  3 00:32:16 1996  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile.in (installcheck): New goal to fulfill needs of
        automake's distcheck.

	* Makefile.in (install): Reorder commands so that VERSION is
        found.

	* Makefile.in (gettextsrcdir): Now use subdirectory intl/ in
        @datadir@/gettext.
	(COMSRCS): Add l10nfile.c.
	(OBJECTS): Add l10nfile.o.
	(DISTFILES): Rename to DISTFILE.normal.  Remove $(DISTFILES.common).
	(DISTFILE.gettext): Remove $(DISTFILES.common).
	(all-gettext): Remove goal.
	(install): If $(PACKAGE) = gettext install, otherwose do nothing.  No
	package but gettext itself should install libintl.h + headers.
	(dist): Extend goal to work for gettext, too.
	(dist-gettext): Remove goal.

	* dcgettext.c [!HAVE_ALLOCA]: Define macro alloca by using malloc.

Sun Jun  2 17:33:06 1996  Ulrich Drepper  <drepper@cygnus.com>

	* loadmsgcat.c (_nl_load_domain): Parameter is now comes from
        find_l10nfile.

Sat Jun  1 02:23:03 1996  Ulrich Drepper  <drepper@cygnus.com>

	* l10nflist.c (__argz_next): Add definition.

	* dcgettext.c [!HAVE_ALLOCA]: Add code for handling missing alloca
	code.  Use new l10nfile handling.

	* localealias.c [!HAVE_ALLOCA]: Add code for handling missing
        alloca code.

	* l10nflist.c: Initial revision.

Tue Apr  2 18:51:18 1996  Ulrich Drepper  <drepper@myware>

	* Makefile.in (all-gettext): New goal.  Same as all-yes.

Thu Mar 28 23:01:22 1996  Karl Eichwalder  <ke@ke.central.de>

	* Makefile.in (gettextsrcdir): Define using @datadir@.

Tue Mar 26 12:39:14 1996  Ulrich Drepper  <drepper@myware>

	* finddomain.c: Include <ctype.h>.  Reported by Roland McGrath.

Sat Mar 23 02:00:35 1996  Ulrich Drepper  <drepper@myware>

	* finddomain.c (stpcpy): Rename to stpcpy__ to prevent clashing
        with external declaration.

Sat Mar  2 00:47:09 1996  Ulrich Drepper  <drepper@myware>

	* Makefile.in (all-no): Rename from all_no.

Sat Feb 17 00:25:59 1996  Ulrich Drepper  <drepper@myware>

	* gettextP.h [loaded_domain]: Array `successor' must now contain up
        to 63 elements (because of codeset name normalization).

	* finddomain.c: Implement codeset name normalization.

Thu Feb 15 04:39:09 1996  Ulrich Drepper  <drepper@myware>

	* Makefile.in (all): Define to `all-@USE_NLS@'.
	(all-yes, all_no): New goals.  `all-no' is noop, `all-yes'
	is former all.

Mon Jan 15 21:46:01 1996  Howard Gayle  <howard@hal.com>

	* localealias.c (alias_compare): Increment string pointers in loop
        of strcasecmp replacement.

Fri Dec 29 21:16:34 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (install-src): Who commented this goal out ? :-)

Fri Dec 29 15:08:16 1995  Ulrich Drepper  <drepper@myware>

	* dcgettext.c (DCGETTEXT): Save `errno'.  Failing system calls
	should not effect it because a missing catalog is no error.
	Reported by Harald K<o:>nig <koenig@tat.physik.uni-tuebingen.de>.

Tue Dec 19 22:09:13 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (Makefile): Explicitly use $(SHELL) for running
        shell scripts.

Fri Dec 15 17:34:59 1995  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile.in (install-src): Only install library and header when
	we use the own implementation.  Don't do it when using the
	system's gettext or catgets functions.

	* dcgettext.c (find_msg): Must not swap domain->hash_size here.

Sat Dec  9 16:24:37 1995  Ulrich Drepper  <drepper@myware>

	* localealias.c, libintl.inst, libgettext.h, hash-string.h,
	gettextP.h, finddomain.c, dcgettext.c, cat-compat.c:
	Use PARAMS instead of __P.  Suggested by Roland McGrath.

Tue Dec  5 11:39:14 1995  Larry Schwimmer  <rosebud@cyclone.stanford.edu>

	* libgettext.h: Use `#if !defined (_LIBINTL_H)' instead of `#if
	!_LIBINTL_H' because Solaris defines _LIBINTL_H as empty.

Mon Dec  4 15:42:07 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (install-src):
	Install libintl.inst instead of libintl.h.install.

Sat Dec  2 22:51:38 1995  Marcus Daniels  <marcus@sysc.pdx.edu>

	* cat-compat.c (textdomain):
	Reverse order in which files are tried you load.  First
	try local file, when this failed absolute path.

Wed Nov 29 02:03:53 1995  Nelson H. F. Beebe  <beebe@math.utah.edu>

	* cat-compat.c (bindtextdomain): Add missing { }.

Sun Nov 26 18:21:41 1995  Ulrich Drepper  <drepper@myware>

	* libintl.inst: Add missing __P definition.  Reported by Nelson Beebe.

	* Makefile.in:
	Add dummy `all' and `dvi' goals.  Reported by Tom Tromey.

Sat Nov 25 16:12:01 1995  Franc,ois Pinard  <pinard@iro.umontreal.ca>

	* hash-string.h: Capitalize arguments of macros.

Sat Nov 25 12:01:36 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (DISTFILES): Prevent files names longer than 13
	characters.  libintl.h.glibc->libintl.glibc,
	libintl.h.install->libintl.inst.  Reported by Joshua R. Poulson.

Sat Nov 25 11:31:12 1995  Eric Backus  <ericb@lsid.hp.com>

	* dcgettext.c: Fix bug in preprocessor conditionals.

Sat Nov 25 02:35:27 1995  Nelson H. F. Beebe  <beebe@math.utah.edu>

	* libgettext.h: Solaris cc does not understand
	 #if !SYMBOL1 && !SYMBOL2.  Sad	but true.

Thu Nov 23 16:22:14 1995  Ulrich Drepper  <drepper@myware>

	* hash-string.h (hash_string):
	Fix for machine with >32 bit `unsigned long's.

	* dcgettext.c (DCGETTEXT):
	Fix horrible bug in loop for alternative translation.

Thu Nov 23 01:45:29 1995  Ulrich Drepper  <drepper@myware>

	* po2tbl.sed.in, linux-msg.sed, xopen-msg.sed:
	Some further simplifications in message number generation.

Mon Nov 20 21:08:43 1995  Ulrich Drepper  <drepper@myware>

	* libintl.h.glibc: Use __const instead of const in prototypes.

	* Makefile.in (install-src):
	Install libintl.h.install instead of libintl.h.  This
	is a stripped-down version.  Suggested by Peter Miller.

	* libintl.h.install, libintl.h.glibc: Initial revision.

	* localealias.c (_nl_expand_alias, read_alias_file):
	Protect prototypes in type casts by __P.

Tue Nov 14 16:43:58 1995  Ulrich Drepper  <drepper@myware>

	* hash-string.h: Correct prototype for hash_string.

Sun Nov 12 12:42:30 1995  Ulrich Drepper  <drepper@myware>

	* hash-string.h (hash_string): Add prototype.

	* gettextP.h: Fix copyright.
	(SWAP): Add prototype.

Wed Nov  8 22:56:33 1995  Ulrich Drepper  <drepper@myware>

	* localealias.c (read_alias_file): Forgot sizeof.
	Avoid calling *printf function.  This introduces a big overhead.
	Patch by Roland McGrath.

Tue Nov  7 14:21:08 1995  Ulrich Drepper  <drepper@myware>

	* finddomain.c, cat-compat.c: Wrong indentation in #if for stpcpy.

	* finddomain.c (stpcpy):
	Define substitution function local.  The macro was to flaky.

	* cat-compat.c: Fix typo.

	* xopen-msg.sed, linux-msg.sed:
	While bringing message number to right place only accept digits.

	* linux-msg.sed, xopen-msg.sed: Now that the counter does not have
	leading 0s we don't need to remove them.  Reported by Marcus
	Daniels.

	* Makefile.in (../po/cat-id-tbl.o): Use $(top_srdir) in
	dependency.  Reported by Marcus Daniels.

	* cat-compat.c: (stpcpy) [!_LIBC && !HAVE_STPCPY]: Define replacement.
	Generally cleanup using #if instead of #ifndef.

	* Makefile.in: Correct typos in comment.  By Franc,ois Pinard.

Mon Nov  6 00:27:02 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (install-src): Don't install libintl.h and libintl.a
	if we use an available gettext implementation.

Sun Nov  5 22:02:08 1995  Ulrich Drepper  <drepper@myware>

	* libgettext.h: Fix typo: HAVE_CATGETTS -> HAVE_CATGETS.  Reported
	by Franc,ois Pinard.

	* libgettext.h: Use #if instead of #ifdef/#ifndef.

	* finddomain.c:
	Comments describing what has to be done should start with FIXME.

Sun Nov  5 19:38:01 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (DISTFILES): Split.  Use DISTFILES with normal meaning.
	DISTFILES.common names the files common to both dist goals.
	DISTFILES.gettext are the files only distributed in GNU gettext.

Sun Nov  5 17:32:54 1995  Ulrich Drepper  <drepper@myware>

	* dcgettext.c (DCGETTEXT): Correct searching in derived locales.
	This was necessary since a change in _nl_find_msg several weeks
	ago.  I really don't know this is still not fixed.

Sun Nov  5 12:43:12 1995  Ulrich Drepper  <drepper@myware>

	* loadmsgcat.c (_nl_load_domain): Test for FILENAME == NULL.  This
	might mark a special condition.

	* finddomain.c (make_entry_rec): Don't make illegal entry as decided.

	* Makefile.in (dist): Suppress error message when ln failed.
	Get files from $(srcdir) explicitly.

	* libgettext.h (gettext_const): Rename to gettext_noop.

Fri Nov  3 07:36:50 1995  Ulrich Drepper  <drepper@myware>

	* finddomain.c (make_entry_rec):
	Protect against wrong locale names by testing mask.

	* libgettext.h (gettext_const): Add macro definition.
	Capitalize macro arguments.

Thu Nov  2 23:15:51 1995  Ulrich Drepper  <drepper@myware>

	* finddomain.c (_nl_find_domain):
	Test for pointer != NULL before accessing value.
	Reported by Tom Tromey.

	* gettext.c (NULL):
	Define as (void*)0 instad of 0.  Reported by Franc,ois Pinard.

Mon Oct 30 21:28:52 1995  Ulrich Drepper  <drepper@myware>

	* po2tbl.sed.in: Serious typo bug fixed by Jim Meyering.

Sat Oct 28 23:20:47 1995  Ulrich Drepper  <drepper@myware>

	* libgettext.h: Disable dcgettext optimization for Solaris 2.3.

	* localealias.c (alias_compare):
	Peter Miller reported that tolower in some systems is
	even dumber than I thought.  Protect call by `isupper'.

Fri Oct 27 22:22:51 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (libdir, includedir): New variables.
	(install-src): Install libintl.a and libintl.h in correct dirs.

Fri Oct 27 22:07:29 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (SOURCES): Fix typo: intrl.compat.c -> intl-compat.c.

	* po2tbl.sed.in: Patch for buggy SEDs by Christian von Roques.

	* localealias.c:
	Fix typo and superflous test.  Reported by Christian von Roques.

Fri Oct  6 11:52:05 1995  Ulrich Drepper  <drepper@myware>

	* finddomain.c (_nl_find_domain):
	Correct some remainder from the pre-CEN syntax.  Now
	we don't have a constant number of successors anymore.

Wed Sep 27 21:41:13 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (DISTFILES): Add libintl.h.glibc.

	* Makefile.in (dist-libc): Add goal for packing sources for glibc.
	(COMSRCS, COMHDRS): Splitted to separate sources shared with glibc.

	* loadmsgcat.c: Forget to continue #if line.

	* localealias.c:
	[_LIBC]: Rename strcasecmp to __strcasecmp to keep ANSI C name
	space clean.

	* dcgettext.c, finddomain.c: Better comment to last change.

	* loadmsgcat.c:
	[_LIBC]: Rename fstat, open, close, read, mmap, and munmap to
	__fstat, __open, __close, __read, __mmap, and __munmap resp
	to keep ANSI C name space clean.

	* finddomain.c:
	[_LIBC]: Rename stpcpy to __stpcpy to keep ANSI C name space clean.

	* dcgettext.c:
	[_LIBC]: Rename getced and stpcpy to __getcwd and __stpcpy resp to
	keep ANSI C name space clean.

	* libgettext.h:
	Include sys/types.h for those old SysV systems out there.
	Reported by Francesco Potorti`.

	* loadmsgcat.c (use_mmap): Define if compiled for glibc.

	* bindtextdom.c: Include all those standard headers
	unconditionally if _LIBC is defined.

	* finddomain.c: Fix 2 times defiend -> defined.

	* textdomain.c: Include libintl.h instead of libgettext.h when
	compiling for glibc.  Include all those standard headers
	unconditionally if _LIBC is defined.

	* localealias.c, loadmsgcat.c: Prepare to be compiled in glibc.

	* gettext.c:
	Include libintl.h instead of libgettext.h when compiling for glibc.
	Get NULL from stddef.h if we compile for glibc.

	* finddomain.c: Include libintl.h instead of libgettext.h when
	compiling for glibc.  Include all those standard headers
	unconditionally if _LIBC is defined.

	* dcgettext.c: Include all those standard headers unconditionally
	if _LIBC is defined.

	* dgettext.c: If compiled in glibc include libintl.h instead of
	libgettext.h.
	(locale.h): Don't rely on HAVE_LOCALE_H when compiling for glibc.

	* dcgettext.c: If compiled in glibc include libintl.h instead of
	libgettext.h.
	(getcwd): Don't rely on HAVE_GETCWD when compiling for glibc.

	* bindtextdom.c:
	If compiled in glibc include libintl.h instead of libgettext.h.

Mon Sep 25 22:23:06 1995  Ulrich Drepper  <drepper@myware>

	* localealias.c (_nl_expand_alias): Don't call bsearch if NMAP <= 0.
	Reported by Marcus Daniels.

	* cat-compat.c (bindtextdomain):
	String used in putenv must not be recycled.
	Reported by Marcus Daniels.

	* libgettext.h (__USE_GNU_GETTEXT):
	Additional symbol to signal that we use GNU gettext
	library.

	* cat-compat.c (bindtextdomain):
	Fix bug with the strange stpcpy replacement.
	Reported by Nelson Beebe.

Sat Sep 23 08:23:51 1995  Ulrich Drepper  <drepper@myware>

	* cat-compat.c: Include <string.h> for stpcpy prototype.

	* localealias.c (read_alias_file):
	While expand strdup code temporary variable `cp' hided
	higher level variable with same name.  Rename to `tp'.

	* textdomain.c (textdomain):
	Avoid warning by using temporary variable in strdup code.

	* finddomain.c (_nl_find_domain): Remove unused variable `application'.

Thu Sep 21 15:51:44 1995  Ulrich Drepper  <drepper@myware>

	* localealias.c (alias_compare):
	Use strcasecmp() only if available.  Else use
	implementation in place.

	* intl-compat.c:
	Wrapper functions now call *__ functions instead of __*.

	* libgettext.h: Declare prototypes for *__ functions instead for __*.

	* cat-compat.c, loadmsgcat.c:
	Don't use xmalloc, xstrdup, and stpcpy.  These functions are not part
	of the standard libc and so prevent libintl.a from being used
	standalone.

	* bindtextdom.c:
	Don't use xmalloc, xstrdup, and stpcpy.  These functions are not part
	of the standard libc and so prevent libintl.a from being used
	standalone.
	Rename to bindtextdomain__ if not used in GNU C Library.

	* dgettext.c:
	Rename function to dgettext__ if not used in GNU C Library.

	* gettext.c:
	Don't use xmalloc, xstrdup, and stpcpy.  These functions are not part
	of the standard libc and so prevent libintl.a from being used
	standalone.
	Functions now called gettext__ if not used in GNU C Library.

	* dcgettext.c, localealias.c, textdomain.c, finddomain.c:
	Don't use xmalloc, xstrdup, and stpcpy.  These functions are not part
	of the standard libc and so prevent libintl.a from being used
	standalone.

Sun Sep 17 23:14:49 1995  Ulrich Drepper  <drepper@myware>

	* finddomain.c: Correct some bugs in handling of CEN standard
 	locale definitions.

Thu Sep  7 01:49:28 1995  Ulrich Drepper  <drepper@myware>

	* finddomain.c: Implement CEN syntax.

	* gettextP.h (loaded_domain): Extend number of successors to 31.

Sat Aug 19 19:25:29 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (aliaspath): Remove path to X11 locale dir.

	* Makefile.in: Make install-src depend on install.  This helps
 	gettext to install the sources and other packages can use the
 	install goal.

Sat Aug 19 15:19:33 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (uninstall): Remove stuff installed by install-src.

Tue Aug 15 13:13:53 1995  Ulrich Drepper  <drepper@myware>

	* VERSION.in: Initial revision.

	* Makefile.in (DISTFILES):
	Add VERSION file.  This is not necessary for gettext, but
	for other packages using this library.

Tue Aug 15 06:16:44 1995  Ulrich Drepper  <drepper@myware>

	* gettextP.h (_nl_find_domain):
	New prototype after changing search strategy.

	* finddomain.c (_nl_find_domain):
	We now try only to find a specified catalog.  Fall back to other
	catalogs listed in the locale list is now done in __dcgettext.

	* dcgettext.c (__dcgettext):
	Now we provide message fall back even to different languages.
	I.e. if a message is not available in one language all the other
 	in the locale list a tried.  Formerly fall back was only possible
 	within one language.  Implemented by moving one loop from
 	_nl_find_domain to here.

Mon Aug 14 23:45:50 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (gettextsrcdir):
	Directory where source of GNU gettext library are made
	available.
	(INSTALL, INSTALL_DATA): Programs used for installing sources.
	(gettext-src): New.  Rule to install GNU gettext sources for use in
	gettextize shell script.

Sun Aug 13 14:40:48 1995  Ulrich Drepper  <drepper@myware>

	* loadmsgcat.c (_nl_load_domain):
	Use mmap for loading only when munmap function is
	also available.

	* Makefile.in (install): Depend on `all' goal.

Wed Aug  9 11:04:33 1995  Ulrich Drepper  <drepper@myware>

	* localealias.c (read_alias_file):
	Do not overwrite '\n' when terminating alias value string.

	* localealias.c (read_alias_file):
	Handle long lines.  Ignore the rest not fitting in
	the buffer after the initial `fgets' call.

Wed Aug  9 00:54:29 1995  Ulrich Drepper  <drepper@myware>

	* gettextP.h (_nl_load_domain):
	Add prototype, replacing prototype for _nl_load_msg_cat.

	* finddomain.c (_nl_find_domain):
	Remove unneeded variable filename and filename_len.
	(expand_alias): Remove prototype because functions does not
 	exist anymore.

	* localealias.c (read_alias_file):
	Change type of fname_len parameter to int.
	(xmalloc): Add prototype.

	* loadmsgcat.c: Better prototypes for xmalloc.

Tue Aug  8 22:30:39 1995  Ulrich Drepper  <drepper@myware>

	* finddomain.c (_nl_find_domain):
	Allow alias name to be constructed from the four components.

	* Makefile.in (aliaspath): New variable.  Set to preliminary value.
	(SOURCES): Add localealias.c.
	(OBJECTS): Add localealias.o.

	* gettextP.h: Add prototype for _nl_expand_alias.

	* finddomain.c: Aliasing handled in intl/localealias.c.

	* localealias.c: Aliasing for locale names.

	* bindtextdom.c: Better prototypes for xmalloc and xstrdup.

Mon Aug  7 23:47:42 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (DISTFILES): gettext.perl is now found in misc/.

	* cat-compat.c (bindtextdomain):
	Correct implementation.  dirname parameter was not used.
	Reported by Marcus Daniels.

	* gettextP.h (loaded_domain):
	New fields `successor' and `decided' for oo, lazy
	message handling implementation.

	* dcgettext.c:
	Adopt for oo, lazy message handliing.
  	Now we can inherit translations from less specific locales.
	(find_msg): New function.

	* loadmsgcat.c, finddomain.c:
	Complete rewrite.  Implement oo, lazy message handling :-).
  	We now have an additional environment variable `LANGUAGE' with
 	a higher priority than LC_ALL for the LC_MESSAGE locale.
  	Here we can set a colon separated list of specifications each
 	of the form `language[_territory[.codeset]][@modifier]'.

Sat Aug  5 09:55:42 1995  Ulrich Drepper  <drepper@myware>

	* finddomain.c (unistd.h):
	Include to get _PC_PATH_MAX defined on system having it.

Fri Aug  4 22:42:00 1995  Ulrich Drepper  <drepper@myware>

	* finddomain.c (stpcpy): Include prototype.

	* Makefile.in (dist): Remove `copying instead' message.

Wed Aug  2 18:52:03 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (ID, TAGS): Do not use $^.

Tue Aug  1 20:07:11 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (TAGS, ID): Use $^ as command argument.
	(TAGS): Give etags -o option t write to current directory,
 	not $(srcdir).
	(ID): Use $(srcdir) instead os $(top_srcdir)/src.
	(distclean): Remove ID.

Sun Jul 30 11:51:46 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (gnulocaledir):
	New variable, always using share/ for data directory.
	(DEFS): Add GNULOCALEDIR, used in finddomain.c.

	* finddomain.c (_nl_default_dirname):
	Set to GNULOCALEDIR, because it always has to point
	to the directory where GNU gettext Library writes it to.

	* intl-compat.c (textdomain, bindtextdomain):
	Undefine macros before function definition.

Sat Jul 22 01:10:02 1995  Ulrich Drepper  <drepper@myware>

	* libgettext.h (_LIBINTL_H):
	Protect definition in case where this file is included as
	libgettext.h on Solaris machines.  Add comment about this.

Wed Jul 19 02:36:42 1995  Ulrich Drepper  <drepper@myware>

	* intl-compat.c (textdomain): Correct typo.

Wed Jul 19 01:51:35 1995  Ulrich Drepper  <drepper@myware>

	* dcgettext.c (dcgettext): Function now called __dcgettext.

	* dgettext.c (dgettext): Now called __dgettext and calls
 	__dcgettext.

	* gettext.c (gettext):
	Function now called __gettext and calls __dgettext.

	* textdomain.c (textdomain): Function now called __textdomain.

	* bindtextdom.c (bindtextdomain): Function now called
 	__bindtextdomain.

	* intl-compat.c: Initial revision.

	* Makefile.in (SOURCES): Add intl-compat.c.
	(OBJECTS): We always compile the GNU gettext library functions.
  	OBJECTS contains all objects but cat-compat.o, ../po/cat-if-tbl.o,
 	and intl-compat.o.
  	(GETTOBJS): Contains now only intl-compat.o.

	* libgettext.h:
	Re-include protection matches dualistic character of libgettext.h.
	For all functions in GNU gettext library define __ counter part.

	* finddomain.c (strchr): Define as index if not found in C library.
	(_nl_find_domain): For relative paths paste / in between.

Tue Jul 18 16:37:45 1995  Ulrich Drepper  <drepper@myware>

	* loadmsgcat.c, finddomain.c: Add inclusion of sys/types.h.

	* xopen-msg.sed: Fix bug with `msgstr ""' lines.
	A little bit better comments.

Tue Jul 18 01:18:27 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in:
	po-mode.el, makelinks, combine-sh are now found in ../misc.

	* po-mode.el, makelinks, combine-sh, elisp-comp:
	Moved to ../misc/.

	* libgettext.h, gettextP.h, gettext.h: Uniform test for __STDC__.

Sun Jul 16 22:33:02 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (INSTALL, INSTALL_DATA): New variables.
	(install-data, uninstall): Install/uninstall .elc file.

	* po-mode.el (Installation comment):
	Add .pox as possible extension of .po files.

Sun Jul 16 13:23:27 1995  Ulrich Drepper  <drepper@myware>

	* elisp-comp: Complete new version by Franc,ois: This does not
 	fail when not compiling in the source directory.

Sun Jul 16 00:12:17 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (../po/cat-id-tbl.o):
	Use $(MAKE) instead of make for recursive make.

	* Makefile.in (.el.elc): Use $(SHELL) instead of /bin/sh.
	(install-exec): Add missing dummy goal.
	(install-data, uninstall): @ in multi-line shell command at
 	beginning, not in front of echo.  Reported by Eric Backus.

Sat Jul 15 00:21:28 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (DISTFILES):
	Rename libgettext.perl to gettext.perl to fit in 14 chars
	file systems.

	* gettext.perl:
 	Rename to gettext.perl to fit in 14 chars file systems.

Thu Jul 13 23:17:20 1995  Ulrich Drepper  <drepper@myware>

	* cat-compat.c: If !STDC_HEADERS try to include malloc.h.

Thu Jul 13 20:55:02 1995  Ulrich Drepper  <drepper@myware>

	* po2tbl.sed.in: Pretty printing.

	* linux-msg.sed, xopen-msg.sed:
	Correct bugs with handling substitute flags in branches.

	* hash-string.h (hash_string):
	Old K&R compilers don't under stand `unsigned char'.

	* gettext.h (nls_uint32):
	Some old K&R compilers (eg HP) don't understand `unsigned int'.

	* cat-compat.c (msg_to_cat_id): De-ANSI-fy prototypes.

Thu Jul 13 01:34:33 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (ELCFILES): New variable.
	(DISTFILES): Add elisp-comp.
	Add implicit rule for .el -> .elc compilation.
	(install-data): install $ELCFILES
	(clean): renamed po-to-tbl and po-to-msg to po2tbl and po2msg resp.

	* elisp-comp: Initial revision

Wed Jul 12 16:14:52 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in:
	cat-id-tbl.c is now found in po/.  This enables us to use an identical
	intl/ directory in all packages.

	* dcgettext.c (dcgettext): hashing does not work for table size <= 2.

	* textdomain.c: fix typo (#if def -> #if defined)

Tue Jul 11 18:44:43 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in (stamp-cat-id): use top_srcdir to address source files
	(DISTFILES,distclean): move tupdate.perl to src/

	* po-to-tbl.sed.in:
	add additional jump to clear change flag to recognize multiline strings

Tue Jul 11 01:32:50 1995  Ulrich Drepper  <drepper@myware>

	* textdomain.c: Protect inclusion of stdlib.h and string.h.

	* loadmsgcat.c: Protect inclusion of stdlib.h.

	* libgettext.h: Protect inclusion of locale.h.
	Allow use in C++ programs.
	Define NULL is not happened already.

	* Makefile.in (DISTFILES): ship po-to-tbl.sed.in instead of
	po-to-tbl.sed.
	(distclean): remove po-to-tbl.sed and tupdate.perl.

	* tupdate.perl.in: Substitute Perl path even in exec line.
	Don't include entries without translation from old .po file.

Tue Jul  4 00:41:51 1995  Ulrich Drepper  <drepper@myware>

	* tupdate.perl.in: use "Updated: " in msgid "".

	* cat-compat.c: Fix typo (LOCALDIR -> LOCALEDIR).
 	Define getenv if !__STDC__.

	* bindtextdom.c: Protect stdlib.h and string.h inclusion.
 	Define free if !__STDC__.

	* finddomain.c: Change DEF_MSG_DOM_DIR to LOCALEDIR.
 	Define free if !__STDC__.

	* cat-compat.c: Change DEF_MSG_DOM_DIR to LOCALEDIR.

Mon Jul  3 23:56:30 1995  Ulrich Drepper  <drepper@myware>

	* Makefile.in: Use LOCALEDIR instead of DEF_MSG_DOM_DIR.
	Remove unneeded $(srcdir) from Makefile.in dependency.

	* makelinks: Add copyright and short description.

	* po-mode.el: Last version for 0.7.

	* tupdate.perl.in: Fix die message.

	* dcgettext.c: Protect include of string.h.

	* gettext.c: Protect include of stdlib.h and further tries to get NULL.

	* finddomain.c: Some corrections in includes.

	* Makefile.in (INCLUDES): Prune list correct path to Makefile.in.

	* po-to-tbl.sed: Adopt for new .po file format.

	* linux-msg.sed, xopen-msg.sed: Adopt for new .po file format.

Sun Jul  2 23:55:03 1995  Ulrich Drepper  <drepper@myware>

	* tupdate.perl.in: Complete rewrite for new .po file format.

Sun Jul  2 02:06:50 1995  Ulrich Drepper  <drepper@myware>

	* First official release.  This directory contains all the code
	needed to internationalize own packages.  It provides functions
	which allow to use the X/Open catgets function with an interface
	like the Uniforum gettext function.  For system which does not
	have neither of those a complete implementation is provided.
