<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: mutt_notmuch.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="mutt.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">1.7.1</span>
   </div>
   <div id="projectbrief">Mail Reader</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">mutt_notmuch.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="mutt__notmuch_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae19e5e40a74b89cecba014949b336e3f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#ae19e5e40a74b89cecba014949b336e3f">nm_read_entire_thread</a> (<a class="el" href="structCONTEXT.html">CONTEXT</a> *ctx, <a class="el" href="structHEADER.html">HEADER</a> *h)</td></tr>
<tr class="memdesc:ae19e5e40a74b89cecba014949b336e3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">QWQ.  <a href="#ae19e5e40a74b89cecba014949b336e3f">More...</a><br /></td></tr>
<tr class="separator:ae19e5e40a74b89cecba014949b336e3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab5bed27317a4b644f3d261496a53c32"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#aab5bed27317a4b644f3d261496a53c32">nm_header_get_folder</a> (<a class="el" href="structHEADER.html">HEADER</a> *h)</td></tr>
<tr class="memdesc:aab5bed27317a4b644f3d261496a53c32"><td class="mdescLeft">&#160;</td><td class="mdescRight">QWQ.  <a href="#aab5bed27317a4b644f3d261496a53c32">More...</a><br /></td></tr>
<tr class="separator:aab5bed27317a4b644f3d261496a53c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f07b237d68c585285dde0939e01fdba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#a1f07b237d68c585285dde0939e01fdba">nm_update_filename</a> (<a class="el" href="structCONTEXT.html">CONTEXT</a> *ctx, <a class="el" href="plural_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *old, <a class="el" href="plural_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *new, <a class="el" href="structHEADER.html">HEADER</a> *h)</td></tr>
<tr class="memdesc:a1f07b237d68c585285dde0939e01fdba"><td class="mdescLeft">&#160;</td><td class="mdescRight">QWQ.  <a href="#a1f07b237d68c585285dde0939e01fdba">More...</a><br /></td></tr>
<tr class="separator:a1f07b237d68c585285dde0939e01fdba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab472f16c463e5bec36633636bd250c15"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#ab472f16c463e5bec36633636bd250c15">nm_normalize_uri</a> (char *new_url, char *url, size_t new_url_sz)</td></tr>
<tr class="memdesc:ab472f16c463e5bec36633636bd250c15"><td class="mdescLeft">&#160;</td><td class="mdescRight">SHORT_DESC.  <a href="#ab472f16c463e5bec36633636bd250c15">More...</a><br /></td></tr>
<tr class="separator:ab472f16c463e5bec36633636bd250c15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5d1623ce233a84bf98adc1c3786bcb0"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#ab5d1623ce233a84bf98adc1c3786bcb0">nm_uri_from_query</a> (<a class="el" href="structCONTEXT.html">CONTEXT</a> *ctx, char *buf, size_t bufsz)</td></tr>
<tr class="memdesc:ab5d1623ce233a84bf98adc1c3786bcb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">QWQ.  <a href="#ab5d1623ce233a84bf98adc1c3786bcb0">More...</a><br /></td></tr>
<tr class="separator:ab5d1623ce233a84bf98adc1c3786bcb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab722ea30f15cd50036124e58e3a2b3d3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#ab722ea30f15cd50036124e58e3a2b3d3">nm_modify_message_tags</a> (<a class="el" href="structCONTEXT.html">CONTEXT</a> *ctx, <a class="el" href="structHEADER.html">HEADER</a> *hdr, char *buf)</td></tr>
<tr class="memdesc:ab722ea30f15cd50036124e58e3a2b3d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">QWQ.  <a href="#ab722ea30f15cd50036124e58e3a2b3d3">More...</a><br /></td></tr>
<tr class="separator:ab722ea30f15cd50036124e58e3a2b3d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a972d1267792a1d646ecf3bf49d38ce00"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#a972d1267792a1d646ecf3bf49d38ce00">nm_query_window_backward</a> (void)</td></tr>
<tr class="memdesc:a972d1267792a1d646ecf3bf49d38ce00"><td class="mdescLeft">&#160;</td><td class="mdescRight">SHORT_DESC.  <a href="#a972d1267792a1d646ecf3bf49d38ce00">More...</a><br /></td></tr>
<tr class="separator:a972d1267792a1d646ecf3bf49d38ce00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea5430205d9c6c6cb5b5a71ff740fddb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#aea5430205d9c6c6cb5b5a71ff740fddb">nm_query_window_forward</a> (void)</td></tr>
<tr class="memdesc:aea5430205d9c6c6cb5b5a71ff740fddb"><td class="mdescLeft">&#160;</td><td class="mdescRight">SHORT_DESC.  <a href="#aea5430205d9c6c6cb5b5a71ff740fddb">More...</a><br /></td></tr>
<tr class="separator:aea5430205d9c6c6cb5b5a71ff740fddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1b964bb1249214078c9ae2424e0df98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#ab1b964bb1249214078c9ae2424e0df98">nm_longrun_init</a> (<a class="el" href="structCONTEXT.html">CONTEXT</a> *ctx, int writable)</td></tr>
<tr class="memdesc:ab1b964bb1249214078c9ae2424e0df98"><td class="mdescLeft">&#160;</td><td class="mdescRight">QWQ.  <a href="#ab1b964bb1249214078c9ae2424e0df98">More...</a><br /></td></tr>
<tr class="separator:ab1b964bb1249214078c9ae2424e0df98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a907ff1833c206352d4bfffd1f1a175b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#a907ff1833c206352d4bfffd1f1a175b2">nm_longrun_done</a> (<a class="el" href="structCONTEXT.html">CONTEXT</a> *ctx)</td></tr>
<tr class="memdesc:a907ff1833c206352d4bfffd1f1a175b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">QWQ.  <a href="#a907ff1833c206352d4bfffd1f1a175b2">More...</a><br /></td></tr>
<tr class="separator:a907ff1833c206352d4bfffd1f1a175b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab02c0b78dd313bf44de75f601cb1cd7c"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#ab02c0b78dd313bf44de75f601cb1cd7c">nm_get_description</a> (<a class="el" href="structCONTEXT.html">CONTEXT</a> *ctx)</td></tr>
<tr class="memdesc:ab02c0b78dd313bf44de75f601cb1cd7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">QWQ.  <a href="#ab02c0b78dd313bf44de75f601cb1cd7c">More...</a><br /></td></tr>
<tr class="separator:ab02c0b78dd313bf44de75f601cb1cd7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37c8732ecbcde0ab4bfe0bdb44b72ab5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#a37c8732ecbcde0ab4bfe0bdb44b72ab5">nm_description_to_path</a> (<a class="el" href="plural_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *desc, char *buf, size_t bufsz)</td></tr>
<tr class="memdesc:a37c8732ecbcde0ab4bfe0bdb44b72ab5"><td class="mdescLeft">&#160;</td><td class="mdescRight">QWQ.  <a href="#a37c8732ecbcde0ab4bfe0bdb44b72ab5">More...</a><br /></td></tr>
<tr class="separator:a37c8732ecbcde0ab4bfe0bdb44b72ab5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f0c16ca7afe0cafe89756eb62f78b7c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#a7f0c16ca7afe0cafe89756eb62f78b7c">nm_record_message</a> (<a class="el" href="structCONTEXT.html">CONTEXT</a> *ctx, char *path, <a class="el" href="structHEADER.html">HEADER</a> *h)</td></tr>
<tr class="memdesc:a7f0c16ca7afe0cafe89756eb62f78b7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">QWQ.  <a href="#a7f0c16ca7afe0cafe89756eb62f78b7c">More...</a><br /></td></tr>
<tr class="separator:a7f0c16ca7afe0cafe89756eb62f78b7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf7ad9f9c4e362ca42128100a2d3f5b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#adf7ad9f9c4e362ca42128100a2d3f5b6">nm_debug_check</a> (<a class="el" href="structCONTEXT.html">CONTEXT</a> *ctx)</td></tr>
<tr class="memdesc:adf7ad9f9c4e362ca42128100a2d3f5b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">QWQ.  <a href="#adf7ad9f9c4e362ca42128100a2d3f5b6">More...</a><br /></td></tr>
<tr class="separator:adf7ad9f9c4e362ca42128100a2d3f5b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18c7ca83f161ea23f087710a71de210b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#a18c7ca83f161ea23f087710a71de210b">nm_get_all_tags</a> (<a class="el" href="structCONTEXT.html">CONTEXT</a> *ctx, char **tag_list, int *tag_count)</td></tr>
<tr class="memdesc:a18c7ca83f161ea23f087710a71de210b"><td class="mdescLeft">&#160;</td><td class="mdescRight">QWQ.  <a href="#a18c7ca83f161ea23f087710a71de210b">More...</a><br /></td></tr>
<tr class="separator:a18c7ca83f161ea23f087710a71de210b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48bd6f05c808710d89e223077d5dc7af"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#a48bd6f05c808710d89e223077d5dc7af">nm_nonctx_get_count</a> (char *path, int *all, int *new)</td></tr>
<tr class="memdesc:a48bd6f05c808710d89e223077d5dc7af"><td class="mdescLeft">&#160;</td><td class="mdescRight">QWQ.  <a href="#a48bd6f05c808710d89e223077d5dc7af">More...</a><br /></td></tr>
<tr class="separator:a48bd6f05c808710d89e223077d5dc7af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74f775476a4184c7f7e1e114b847a7e1"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#a74f775476a4184c7f7e1e114b847a7e1">nm_header_get_tag_transformed</a> (char *tag, <a class="el" href="structHEADER.html">HEADER</a> *h)</td></tr>
<tr class="memdesc:a74f775476a4184c7f7e1e114b847a7e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">QWQ.  <a href="#a74f775476a4184c7f7e1e114b847a7e1">More...</a><br /></td></tr>
<tr class="separator:a74f775476a4184c7f7e1e114b847a7e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86e55cea77b9527a3f83b336de4e8eb1"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#a86e55cea77b9527a3f83b336de4e8eb1">nm_header_get_tags_transformed</a> (<a class="el" href="structHEADER.html">HEADER</a> *h)</td></tr>
<tr class="memdesc:a86e55cea77b9527a3f83b336de4e8eb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">QWQ.  <a href="#a86e55cea77b9527a3f83b336de4e8eb1">More...</a><br /></td></tr>
<tr class="separator:a86e55cea77b9527a3f83b336de4e8eb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a023d435097bfc4c60e313552a6468410"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#a023d435097bfc4c60e313552a6468410">nm_header_get_tags</a> (<a class="el" href="structHEADER.html">HEADER</a> *h)</td></tr>
<tr class="memdesc:a023d435097bfc4c60e313552a6468410"><td class="mdescLeft">&#160;</td><td class="mdescRight">QWQ.  <a href="#a023d435097bfc4c60e313552a6468410">More...</a><br /></td></tr>
<tr class="separator:a023d435097bfc4c60e313552a6468410"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a16e62ec8e0ec6fbc4b25d592d7ba940a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmx__ops.html">mx_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutt__notmuch_8h.html#a16e62ec8e0ec6fbc4b25d592d7ba940a">mx_notmuch_ops</a></td></tr>
<tr class="memdesc:a16e62ec8e0ec6fbc4b25d592d7ba940a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mailbox API.  <a href="#a16e62ec8e0ec6fbc4b25d592d7ba940a">More...</a><br /></td></tr>
<tr class="separator:a16e62ec8e0ec6fbc4b25d592d7ba940a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae19e5e40a74b89cecba014949b336e3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae19e5e40a74b89cecba014949b336e3f">&#9670;&nbsp;</a></span>nm_read_entire_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nm_read_entire_thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCONTEXT.html">CONTEXT</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structHEADER.html">HEADER</a> *&#160;</td>
          <td class="paramname"><em>h</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QWQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>YYY </td></tr>
    <tr><td class="paramname">h</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<p>DESCRIPTION</p>
<p>Returns: int </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02136">2136</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;{</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;  <span class="keyword">struct </span><a class="code" href="structnm__ctxdata.html">nm_ctxdata</a> *data = <a class="code" href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a>(ctx);</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="pgpmicalg_8c.html#afc3e389b26a8fb3c1e864175ddd630fd">id</a>;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  <span class="keywordtype">char</span> *qstr = <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  notmuch_query_t *q = <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  notmuch_database_t *<a class="code" href="structnm__ctxdata.html#a74cd41a27e48de6d5d9973b67c63f0ef">db</a> = <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;  notmuch_message_t *msg = <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  <span class="keywordtype">int</span> rc = -1;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  <span class="keywordflow">if</span> (!data)</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  <span class="keywordflow">if</span> (!(db = <a class="code" href="mutt__notmuch_8c.html#a7d3f185f600e72777d7d55f7f977d574">get_db</a>(data, <a class="code" href="lib_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)) || !(msg = <a class="code" href="mutt__notmuch_8c.html#a3469f413b57c864b3842c999188829bb">get_nm_message</a>(db, h)))</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(1, (debugfile,</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;             <span class="stringliteral">&quot;nm: reading entire-thread messages...[current count=%d]\n&quot;</span>,</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;             ctx-&gt;<a class="code" href="structCONTEXT.html#a7e55120b463e69e055a10e2f579dcae9">msgcount</a>));</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <a class="code" href="mutt__notmuch_8c.html#a43486049bd3cbc9b950d9dbb1d731387">progress_reset</a>(ctx);</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <span class="keywordtype">id</span> = notmuch_message_get_thread_id(msg);</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;  <span class="keywordflow">if</span> (!<span class="keywordtype">id</span>)</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;  <a class="code" href="mutt__notmuch_8c.html#ad16e085ea8f88c45ed216df576dbc94e">append_str_item</a>(&amp;qstr, <span class="stringliteral">&quot;thread:&quot;</span>, 0);</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  <a class="code" href="mutt__notmuch_8c.html#ad16e085ea8f88c45ed216df576dbc94e">append_str_item</a>(&amp;qstr, <span class="keywordtype">id</span>, 0);</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  q = notmuch_query_create(db, qstr);</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;  <a class="code" href="lib_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;qstr);</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  <span class="keywordflow">if</span> (!q)</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  <a class="code" href="mutt__notmuch_8c.html#a284a1155894b4ed4351ad49ebe5dcd9c">apply_exclude_tags</a>(q);</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  notmuch_query_set_sort(q, NOTMUCH_SORT_NEWEST_FIRST);</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;  <a class="code" href="mutt__notmuch_8c.html#a98c0dbe26d9d4b0c102d2be0d5567e61">read_threads_query</a>(ctx, q, 1, 0);</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;  ctx-&gt;<a class="code" href="structCONTEXT.html#a457694c2f210ce8ae788131840ef03f6">mtime</a> = <a class="code" href="protos_8h.html#a023a060a6ec6f836453010baac84279e">time</a>(<a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;  rc = 0;</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structCONTEXT.html#a7e55120b463e69e055a10e2f579dcae9">msgcount</a> &gt; data-&gt;<a class="code" href="structnm__ctxdata.html#a6350a9033547e41ff1134d53193a8a7b">oldmsgcount</a>)</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    <a class="code" href="mx_8c.html#a2436c8b1dd1b9a16caf59c9bf9e0fabe">mx_update_context</a>(ctx, ctx-&gt;<a class="code" href="structCONTEXT.html#a7e55120b463e69e055a10e2f579dcae9">msgcount</a> - data-&gt;<a class="code" href="structnm__ctxdata.html#a6350a9033547e41ff1134d53193a8a7b">oldmsgcount</a>);</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;done:</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  <span class="keywordflow">if</span> (q)</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    notmuch_query_destroy(q);</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="mutt__notmuch_8c.html#a6c2a6ea2b4fa59decf9a7218dd369842">is_longrun</a>(data))</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <a class="code" href="mutt__notmuch_8c.html#a50f772064f48d16e4ed972b6c6eaae63">release_db</a>(data);</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;  <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="structCONTEXT.html#a7e55120b463e69e055a10e2f579dcae9">msgcount</a> == data-&gt;<a class="code" href="structnm__ctxdata.html#a6350a9033547e41ff1134d53193a8a7b">oldmsgcount</a>)</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    <a class="code" href="globals_8h.html#a6021755edce63ab9d4e49f97213e83ab">mutt_message</a>(<a class="code" href="lib_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;No more messages in the thread.&quot;</span>));</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;  data-&gt;<a class="code" href="structnm__ctxdata.html#a6350a9033547e41ff1134d53193a8a7b">oldmsgcount</a> = 0;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(1, (debugfile,</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;             <span class="stringliteral">&quot;nm: reading entire-thread messages... done [rc=%d, count=%d]\n&quot;</span>,</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;             rc, ctx-&gt;<a class="code" href="structCONTEXT.html#a7e55120b463e69e055a10e2f579dcae9">msgcount</a>));</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;}</div><div class="ttc" id="structCONTEXT_html_a7e55120b463e69e055a10e2f579dcae9"><div class="ttname"><a href="structCONTEXT.html#a7e55120b463e69e055a10e2f579dcae9">CONTEXT::msgcount</a></div><div class="ttdeci">int msgcount</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l01027">mutt.h:1027</a></div></div>
<div class="ttc" id="lib_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="lib_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00058">lib.h:58</a></div></div>
<div class="ttc" id="explodename_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="explodename_8c_source.html#l00034">explodename.c:34</a></div></div>
<div class="ttc" id="lib_8h_html_a5c75177122494450ca7234a1f4048711"><div class="ttname"><a href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a></div><div class="ttdeci">#define dprint(N, X)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00152">lib.h:152</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a43486049bd3cbc9b950d9dbb1d731387"><div class="ttname"><a href="mutt__notmuch_8c.html#a43486049bd3cbc9b950d9dbb1d731387">progress_reset</a></div><div class="ttdeci">static void progress_reset(CONTEXT *ctx)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l01259">mutt_notmuch.c:1259</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a98c0dbe26d9d4b0c102d2be0d5567e61"><div class="ttname"><a href="mutt__notmuch_8c.html#a98c0dbe26d9d4b0c102d2be0d5567e61">read_threads_query</a></div><div class="ttdeci">static void read_threads_query(CONTEXT *ctx, notmuch_query_t *q, int dedup, int limit)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l01546">mutt_notmuch.c:1546</a></div></div>
<div class="ttc" id="lib_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="lib_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00077">lib.h:77</a></div></div>
<div class="ttc" id="structCONTEXT_html_a457694c2f210ce8ae788131840ef03f6"><div class="ttname"><a href="structCONTEXT.html#a457694c2f210ce8ae788131840ef03f6">CONTEXT::mtime</a></div><div class="ttdeci">time_t mtime</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l01014">mutt.h:1014</a></div></div>
<div class="ttc" id="structnm__ctxdata_html_a74cd41a27e48de6d5d9973b67c63f0ef"><div class="ttname"><a href="structnm__ctxdata.html#a74cd41a27e48de6d5d9973b67c63f0ef">nm_ctxdata::db</a></div><div class="ttdeci">notmuch_database_t * db</div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00145">mutt_notmuch.c:145</a></div></div>
<div class="ttc" id="structnm__ctxdata_html_a6350a9033547e41ff1134d53193a8a7b"><div class="ttname"><a href="structnm__ctxdata.html#a6350a9033547e41ff1134d53193a8a7b">nm_ctxdata::oldmsgcount</a></div><div class="ttdeci">int oldmsgcount</div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00155">mutt_notmuch.c:155</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a6c2a6ea2b4fa59decf9a7218dd369842"><div class="ttname"><a href="mutt__notmuch_8c.html#a6c2a6ea2b4fa59decf9a7218dd369842">is_longrun</a></div><div class="ttdeci">static int is_longrun(struct nm_ctxdata *data)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00866">mutt_notmuch.c:866</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a7d3f185f600e72777d7d55f7f977d574"><div class="ttname"><a href="mutt__notmuch_8c.html#a7d3f185f600e72777d7d55f7f977d574">get_db</a></div><div class="ttdeci">static notmuch_database_t * get_db(struct nm_ctxdata *data, int writable)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00765">mutt_notmuch.c:765</a></div></div>
<div class="ttc" id="protos_8h_html_a023a060a6ec6f836453010baac84279e"><div class="ttname"><a href="protos_8h.html#a023a060a6ec6f836453010baac84279e">time</a></div><div class="ttdeci">time_t time()</div></div>
<div class="ttc" id="mx_8c_html_a2436c8b1dd1b9a16caf59c9bf9e0fabe"><div class="ttname"><a href="mx_8c.html#a2436c8b1dd1b9a16caf59c9bf9e0fabe">mx_update_context</a></div><div class="ttdeci">void mx_update_context(CONTEXT *ctx, int new_messages)</div><div class="ttdef"><b>Definition:</b> <a href="mx_8c_source.html#l01456">mx.c:1456</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a284a1155894b4ed4351ad49ebe5dcd9c"><div class="ttname"><a href="mutt__notmuch_8c.html#a284a1155894b4ed4351ad49ebe5dcd9c">apply_exclude_tags</a></div><div class="ttdeci">static void apply_exclude_tags(notmuch_query_t *query)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00906">mutt_notmuch.c:906</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_ad16e085ea8f88c45ed216df576dbc94e"><div class="ttname"><a href="mutt__notmuch_8c.html#ad16e085ea8f88c45ed216df576dbc94e">append_str_item</a></div><div class="ttdeci">static void append_str_item(char **str, const char *item, int sep)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00984">mutt_notmuch.c:984</a></div></div>
<div class="ttc" id="structnm__ctxdata_html"><div class="ttname"><a href="structnm__ctxdata.html">nm_ctxdata</a></div><div class="ttdoc">NotMuch data attached to a context. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00143">mutt_notmuch.c:143</a></div></div>
<div class="ttc" id="globals_8h_html_a6021755edce63ab9d4e49f97213e83ab"><div class="ttname"><a href="globals_8h.html#a6021755edce63ab9d4e49f97213e83ab">mutt_message</a></div><div class="ttdeci">WHERE void(* mutt_message)(const char *,...)</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00020">globals.h:20</a></div></div>
<div class="ttc" id="lib_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="lib_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a50f772064f48d16e4ed972b6c6eaae63"><div class="ttname"><a href="mutt__notmuch_8c.html#a50f772064f48d16e4ed972b6c6eaae63">release_db</a></div><div class="ttdeci">static int release_db(struct nm_ctxdata *data)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00787">mutt_notmuch.c:787</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_aeb2eca2d9521d236e2a5f4b90d1a4d36"><div class="ttname"><a href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a></div><div class="ttdeci">static struct nm_ctxdata * get_ctxdata(CONTEXT *ctx)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00483">mutt_notmuch.c:483</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a3469f413b57c864b3842c999188829bb"><div class="ttname"><a href="mutt__notmuch_8c.html#a3469f413b57c864b3842c999188829bb">get_nm_message</a></div><div class="ttdeci">static notmuch_message_t * get_nm_message(notmuch_database_t *db, HEADER *hdr)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l01581">mutt_notmuch.c:1581</a></div></div>
<div class="ttc" id="pgpmicalg_8c_html_afc3e389b26a8fb3c1e864175ddd630fd"><div class="ttname"><a href="pgpmicalg_8c.html#afc3e389b26a8fb3c1e864175ddd630fd">id</a></div><div class="ttdeci">short id</div><div class="ttdef"><b>Definition:</b> <a href="pgpmicalg_8c_source.html#l00040">pgpmicalg.c:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab5bed27317a4b644f3d261496a53c32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab5bed27317a4b644f3d261496a53c32">&#9670;&nbsp;</a></span>nm_header_get_folder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nm_header_get_folder </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structHEADER.html">HEADER</a> *&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QWQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<p>DESCRIPTION</p>
<p>Returns: char* </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02017">2017</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;{</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <span class="keywordflow">return</span> (h &amp;&amp; h-&gt;<a class="code" href="structHEADER.html#a52ae60422d473becdf88a6b5a570c5a9">data</a>) ? ((<span class="keyword">struct </span><a class="code" href="structnm__hdrdata.html">nm_hdrdata</a> *) h-&gt;<a class="code" href="structHEADER.html#a52ae60422d473becdf88a6b5a570c5a9">data</a>)-&gt;folder : <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;}</div><div class="ttc" id="explodename_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="explodename_8c_source.html#l00034">explodename.c:34</a></div></div>
<div class="ttc" id="structnm__hdrdata_html"><div class="ttname"><a href="structnm__hdrdata.html">nm_hdrdata</a></div><div class="ttdoc">NotMuch data attached to an email. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00125">mutt_notmuch.c:125</a></div></div>
<div class="ttc" id="structHEADER_html_a52ae60422d473becdf88a6b5a570c5a9"><div class="ttname"><a href="structHEADER.html#a52ae60422d473becdf88a6b5a570c5a9">HEADER::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00897">mutt.h:897</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f07b237d68c585285dde0939e01fdba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f07b237d68c585285dde0939e01fdba">&#9670;&nbsp;</a></span>nm_update_filename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nm_update_filename </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCONTEXT.html">CONTEXT</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="plural_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="plural_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structHEADER.html">HEADER</a> *&#160;</td>
          <td class="paramname"><em>h</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QWQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>YYY </td></tr>
    <tr><td class="paramname">old</td><td>YYY </td></tr>
    <tr><td class="paramname">new</td><td>YYY </td></tr>
    <tr><td class="paramname">h</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<p>DESCRIPTION</p>
<p>Returns: int </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02353">2353</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;{</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;  <span class="keywordtype">char</span> buf[<a class="code" href="dcigettext_8c.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>];</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;  <span class="keywordtype">int</span> rc;</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;  <span class="keyword">struct </span><a class="code" href="structnm__ctxdata.html">nm_ctxdata</a> *data = <a class="code" href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a>(ctx);</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;  <span class="keywordflow">if</span> (!data || !<span class="keyword">new</span>)</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;  <span class="keywordflow">if</span> (!old &amp;&amp; h &amp;&amp; h-&gt;<a class="code" href="structHEADER.html#a52ae60422d473becdf88a6b5a570c5a9">data</a>)</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;  {</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <a class="code" href="mutt__notmuch_8c.html#af4557d1072182d73c4a222934e0137c1">header_get_fullpath</a>(h, buf, <span class="keyword">sizeof</span>(buf));</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    old = buf;</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  }</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;  rc = <a class="code" href="mutt__notmuch_8c.html#a358111577a92b323c5fe3e8089d9875b">rename_filename</a>(data, old, <span class="keyword">new</span>, h);</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="mutt__notmuch_8c.html#a6c2a6ea2b4fa59decf9a7218dd369842">is_longrun</a>(data))</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    <a class="code" href="mutt__notmuch_8c.html#a50f772064f48d16e4ed972b6c6eaae63">release_db</a>(data);</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;  ctx-&gt;<a class="code" href="structCONTEXT.html#a457694c2f210ce8ae788131840ef03f6">mtime</a> = <a class="code" href="protos_8h.html#a023a060a6ec6f836453010baac84279e">time</a>(<a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;}</div><div class="ttc" id="explodename_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="explodename_8c_source.html#l00034">explodename.c:34</a></div></div>
<div class="ttc" id="structHEADER_html_a52ae60422d473becdf88a6b5a570c5a9"><div class="ttname"><a href="structHEADER.html#a52ae60422d473becdf88a6b5a570c5a9">HEADER::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00897">mutt.h:897</a></div></div>
<div class="ttc" id="structCONTEXT_html_a457694c2f210ce8ae788131840ef03f6"><div class="ttname"><a href="structCONTEXT.html#a457694c2f210ce8ae788131840ef03f6">CONTEXT::mtime</a></div><div class="ttdeci">time_t mtime</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l01014">mutt.h:1014</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a6c2a6ea2b4fa59decf9a7218dd369842"><div class="ttname"><a href="mutt__notmuch_8c.html#a6c2a6ea2b4fa59decf9a7218dd369842">is_longrun</a></div><div class="ttdeci">static int is_longrun(struct nm_ctxdata *data)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00866">mutt_notmuch.c:866</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a358111577a92b323c5fe3e8089d9875b"><div class="ttname"><a href="mutt__notmuch_8c.html#a358111577a92b323c5fe3e8089d9875b">rename_filename</a></div><div class="ttdeci">static int rename_filename(struct nm_ctxdata *data, const char *old, const char *new, HEADER *h)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l01847">mutt_notmuch.c:1847</a></div></div>
<div class="ttc" id="protos_8h_html_a023a060a6ec6f836453010baac84279e"><div class="ttname"><a href="protos_8h.html#a023a060a6ec6f836453010baac84279e">time</a></div><div class="ttdeci">time_t time()</div></div>
<div class="ttc" id="structnm__ctxdata_html"><div class="ttname"><a href="structnm__ctxdata.html">nm_ctxdata</a></div><div class="ttdoc">NotMuch data attached to a context. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00143">mutt_notmuch.c:143</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_af4557d1072182d73c4a222934e0137c1"><div class="ttname"><a href="mutt__notmuch_8c.html#af4557d1072182d73c4a222934e0137c1">header_get_fullpath</a></div><div class="ttdeci">static char * header_get_fullpath(HEADER *h, char *buf, size_t bufsz)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00468">mutt_notmuch.c:468</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a50f772064f48d16e4ed972b6c6eaae63"><div class="ttname"><a href="mutt__notmuch_8c.html#a50f772064f48d16e4ed972b6c6eaae63">release_db</a></div><div class="ttdeci">static int release_db(struct nm_ctxdata *data)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00787">mutt_notmuch.c:787</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_aeb2eca2d9521d236e2a5f4b90d1a4d36"><div class="ttname"><a href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a></div><div class="ttdeci">static struct nm_ctxdata * get_ctxdata(CONTEXT *ctx)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00483">mutt_notmuch.c:483</a></div></div>
<div class="ttc" id="dcigettext_8c_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="dcigettext_8c.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="dcigettext_8c_source.html#l00176">dcigettext.c:176</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab472f16c463e5bec36633636bd250c15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab472f16c463e5bec36633636bd250c15">&#9670;&nbsp;</a></span>nm_normalize_uri()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nm_normalize_uri </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>new_url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>new_url_sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SHORT_DESC. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_url</td><td>YYY </td></tr>
    <tr><td class="paramname">url</td><td>YYY </td></tr>
    <tr><td class="paramname">new_url_sz</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>YYY</dd></dl>
<p>takes a notmuch URI, parses it and reformat it in a canonical way </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02233">2233</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;{</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(2, (debugfile, <span class="stringliteral">&quot;nm_normalize_uri (%s)\n&quot;</span>, url));</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;  <span class="keywordtype">char</span> buf[<a class="code" href="dotlock_8c.html#a2ed4d73ac96556fca2623216ca4a4e4a">LONG_STRING</a>];</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;  <a class="code" href="structCONTEXT.html">CONTEXT</a> tmp_ctx;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;  <span class="keyword">struct </span><a class="code" href="structnm__ctxdata.html">nm_ctxdata</a> tmp_ctxdata;</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;  tmp_ctx.<a class="code" href="structCONTEXT.html#ae975ede7d262b60f85c17745fcb95064">magic</a> = <a class="code" href="mx_8h.html#aac34dfe6c6b73b43a4656c9dce041034a05c2d20da557ac5b2c45a349eec1fba6">MUTT_NOTMUCH</a>;</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;  tmp_ctx.<a class="code" href="structCONTEXT.html#a52adf72b49acb8611a8796714e7b173d">data</a> = &amp;tmp_ctxdata;</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;  tmp_ctxdata.db_query = <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mutt__notmuch_8c.html#aa4f1b6ce7b277ea5e941d93c8ae3d6b4">url_parse_query</a>(url, &amp;tmp_ctxdata.db_filename, &amp;tmp_ctxdata.query_items)) {</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    <a class="code" href="extlib_8c.html#a90829ddbd5f0edf736c9f6e595cfc0be">mutt_error</a>(<a class="code" href="lib_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;failed to parse #1 notmuch uri: %s&quot;</span>), url);</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(2, (debugfile, <span class="stringliteral">&quot;nm_normalize_uri ()  error #1\n&quot;</span>));</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;  }</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(2, (debugfile, <span class="stringliteral">&quot;nm_normalize_uri #1 ()  db_query: %s\n&quot;</span>, tmp_ctxdata.db_query));</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="mutt__notmuch_8c.html#a99d127fa86db606d0f17977da9ee0af6">get_query_string</a>(&amp;tmp_ctxdata, <span class="keyword">false</span>) == <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    <a class="code" href="extlib_8c.html#a90829ddbd5f0edf736c9f6e595cfc0be">mutt_error</a>(<a class="code" href="lib_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;failed to parse #2 notmuch uri: %s&quot;</span>), url);</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(2, (debugfile, <span class="stringliteral">&quot;nm_normalize_uri ()  error #2\n&quot;</span>));</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;  }</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(2, (debugfile, <span class="stringliteral">&quot;nm_normalize_uri #2 ()  db_query: %s\n&quot;</span>, tmp_ctxdata.db_query));</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  strncpy(buf, tmp_ctxdata.db_query, <span class="keyword">sizeof</span>(buf));</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="mutt__notmuch_8c.html#ab5d1623ce233a84bf98adc1c3786bcb0">nm_uri_from_query</a>(&amp;tmp_ctx, buf, <span class="keyword">sizeof</span>(buf)) == <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    <a class="code" href="extlib_8c.html#a90829ddbd5f0edf736c9f6e595cfc0be">mutt_error</a>(<a class="code" href="lib_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;failed to parse #3 notmuch uri: %s&quot;</span>), url);</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(2, (debugfile, <span class="stringliteral">&quot;nm_normalize_uri ()  error #3\n&quot;</span>));</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;  }</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  strncpy(new_url, buf, new_url_sz);</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(2, (debugfile, <span class="stringliteral">&quot;nm_normalize_uri #3 (%s)  %s\n&quot;</span>, url, new_url));</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;  <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;}</div><div class="ttc" id="explodename_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="explodename_8c_source.html#l00034">explodename.c:34</a></div></div>
<div class="ttc" id="lib_8h_html_a5c75177122494450ca7234a1f4048711"><div class="ttname"><a href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a></div><div class="ttdeci">#define dprint(N, X)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00152">lib.h:152</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a99d127fa86db606d0f17977da9ee0af6"><div class="ttname"><a href="mutt__notmuch_8c.html#a99d127fa86db606d0f17977da9ee0af6">get_query_string</a></div><div class="ttdeci">static char * get_query_string(struct nm_ctxdata *data, int window)</div><div class="ttdoc">SHORT_DESC. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00602">mutt_notmuch.c:602</a></div></div>
<div class="ttc" id="structCONTEXT_html_a52adf72b49acb8611a8796714e7b173d"><div class="ttname"><a href="structCONTEXT.html#a52adf72b49acb8611a8796714e7b173d">CONTEXT::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l01055">mutt.h:1055</a></div></div>
<div class="ttc" id="structCONTEXT_html"><div class="ttname"><a href="structCONTEXT.html">CONTEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l01008">mutt.h:1008</a></div></div>
<div class="ttc" id="extlib_8c_html_a90829ddbd5f0edf736c9f6e595cfc0be"><div class="ttname"><a href="extlib_8c.html#a90829ddbd5f0edf736c9f6e595cfc0be">mutt_error</a></div><div class="ttdeci">void(* mutt_error)(const char *,...)</div><div class="ttdef"><b>Definition:</b> <a href="extlib_8c_source.html#l00037">extlib.c:37</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_ab5d1623ce233a84bf98adc1c3786bcb0"><div class="ttname"><a href="mutt__notmuch_8c.html#ab5d1623ce233a84bf98adc1c3786bcb0">nm_uri_from_query</a></div><div class="ttdeci">char * nm_uri_from_query(CONTEXT *ctx, char *buf, size_t bufsz)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l02201">mutt_notmuch.c:2201</a></div></div>
<div class="ttc" id="mx_8h_html_aac34dfe6c6b73b43a4656c9dce041034a05c2d20da557ac5b2c45a349eec1fba6"><div class="ttname"><a href="mx_8h.html#aac34dfe6c6b73b43a4656c9dce041034a05c2d20da557ac5b2c45a349eec1fba6">MUTT_NOTMUCH</a></div><div class="ttdef"><b>Definition:</b> <a href="mx_8h_source.html#l00042">mx.h:42</a></div></div>
<div class="ttc" id="structnm__ctxdata_html"><div class="ttname"><a href="structnm__ctxdata.html">nm_ctxdata</a></div><div class="ttdoc">NotMuch data attached to a context. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00143">mutt_notmuch.c:143</a></div></div>
<div class="ttc" id="structCONTEXT_html_ae975ede7d262b60f85c17745fcb95064"><div class="ttname"><a href="structCONTEXT.html#ae975ede7d262b60f85c17745fcb95064">CONTEXT::magic</a></div><div class="ttdeci">short magic</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l01036">mutt.h:1036</a></div></div>
<div class="ttc" id="lib_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="lib_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="dotlock_8c_html_a2ed4d73ac96556fca2623216ca4a4e4a"><div class="ttname"><a href="dotlock_8c.html#a2ed4d73ac96556fca2623216ca4a4e4a">LONG_STRING</a></div><div class="ttdeci">#define LONG_STRING</div><div class="ttdef"><b>Definition:</b> <a href="dotlock_8c_source.html#l00063">dotlock.c:63</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_aa4f1b6ce7b277ea5e941d93c8ae3d6b4"><div class="ttname"><a href="mutt__notmuch_8c.html#aa4f1b6ce7b277ea5e941d93c8ae3d6b4">url_parse_query</a></div><div class="ttdeci">static int url_parse_query(char *url, char **filename, struct uri_tag **tags)</div><div class="ttdoc">Extract the tokens from a query URI. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00240">mutt_notmuch.c:240</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5d1623ce233a84bf98adc1c3786bcb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5d1623ce233a84bf98adc1c3786bcb0">&#9670;&nbsp;</a></span>nm_uri_from_query()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nm_uri_from_query </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCONTEXT.html">CONTEXT</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bufsz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QWQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>YYY </td></tr>
    <tr><td class="paramname">buf</td><td>YYY </td></tr>
    <tr><td class="paramname">bufsz</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<p>DESCRIPTION</p>
<p>Returns: char* </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02201">2201</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;{</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(2, (debugfile, <span class="stringliteral">&quot;nm_uri_from_query (%s)\n&quot;</span>, buf));</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  <span class="keyword">struct </span><a class="code" href="structnm__ctxdata.html">nm_ctxdata</a> *data = <a class="code" href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a>(ctx);</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  <span class="keywordtype">char</span> uri[<a class="code" href="dcigettext_8c.html#a45614b6d4dc532a7211d75e0aa18c964">_POSIX_PATH_MAX</a> + <a class="code" href="dotlock_8c.html#a2ed4d73ac96556fca2623216ca4a4e4a">LONG_STRING</a> + 32]; <span class="comment">/* path to DB + query + URI &quot;decoration&quot; */</span></div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  <span class="keywordflow">if</span> (data)</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <a class="code" href="dotlock_8c.html#a357a42eb6494ea592e9c3f96c55cebe2">snprintf</a>(uri, <span class="keyword">sizeof</span>(uri), <span class="stringliteral">&quot;notmuch://%s?query=%s&quot;</span>, <a class="code" href="mutt__notmuch_8c.html#a15dce8da71e9c5da985451053169656e">get_db_filename</a>(data), buf);</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="globals_8h.html#a245ecf18d736d621042b81b48d1436b5">NotmuchDefaultUri</a>)</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <a class="code" href="dotlock_8c.html#a357a42eb6494ea592e9c3f96c55cebe2">snprintf</a>(uri, <span class="keyword">sizeof</span>(uri), <span class="stringliteral">&quot;%s?query=%s&quot;</span>, <a class="code" href="globals_8h.html#a245ecf18d736d621042b81b48d1436b5">NotmuchDefaultUri</a>, buf);</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="globals_8h.html#a5b8a39403e0e06c8c9e1036744a0a048">Maildir</a>)</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    <a class="code" href="dotlock_8c.html#a357a42eb6494ea592e9c3f96c55cebe2">snprintf</a>(uri, <span class="keyword">sizeof</span>(uri), <span class="stringliteral">&quot;notmuch://%s?query=%s&quot;</span>, <a class="code" href="globals_8h.html#a5b8a39403e0e06c8c9e1036744a0a048">Maildir</a>, buf);</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  strncpy(buf, uri, bufsz);</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;  buf[bufsz - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(1, (debugfile, <span class="stringliteral">&quot;nm: uri from query &#39;%s&#39;\n&quot;</span>, buf));</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <span class="keywordflow">return</span> buf;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;}</div><div class="ttc" id="explodename_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="explodename_8c_source.html#l00034">explodename.c:34</a></div></div>
<div class="ttc" id="lib_8h_html_a5c75177122494450ca7234a1f4048711"><div class="ttname"><a href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a></div><div class="ttdeci">#define dprint(N, X)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00152">lib.h:152</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a15dce8da71e9c5da985451053169656e"><div class="ttname"><a href="mutt__notmuch_8c.html#a15dce8da71e9c5da985451053169656e">get_db_filename</a></div><div class="ttdeci">static const char * get_db_filename(struct nm_ctxdata *data)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00686">mutt_notmuch.c:686</a></div></div>
<div class="ttc" id="globals_8h_html_a245ecf18d736d621042b81b48d1436b5"><div class="ttname"><a href="globals_8h.html#a245ecf18d736d621042b81b48d1436b5">NotmuchDefaultUri</a></div><div class="ttdeci">WHERE char * NotmuchDefaultUri</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00316">globals.h:316</a></div></div>
<div class="ttc" id="dcigettext_8c_html_a45614b6d4dc532a7211d75e0aa18c964"><div class="ttname"><a href="dcigettext_8c.html#a45614b6d4dc532a7211d75e0aa18c964">_POSIX_PATH_MAX</a></div><div class="ttdeci">#define _POSIX_PATH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="dcigettext_8c_source.html#l00159">dcigettext.c:159</a></div></div>
<div class="ttc" id="structnm__ctxdata_html"><div class="ttname"><a href="structnm__ctxdata.html">nm_ctxdata</a></div><div class="ttdoc">NotMuch data attached to a context. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00143">mutt_notmuch.c:143</a></div></div>
<div class="ttc" id="dotlock_8c_html_a357a42eb6494ea592e9c3f96c55cebe2"><div class="ttname"><a href="dotlock_8c.html#a357a42eb6494ea592e9c3f96c55cebe2">snprintf</a></div><div class="ttdeci">int snprintf(char *, size_t, const char *,...)</div></div>
<div class="ttc" id="dotlock_8c_html_a2ed4d73ac96556fca2623216ca4a4e4a"><div class="ttname"><a href="dotlock_8c.html#a2ed4d73ac96556fca2623216ca4a4e4a">LONG_STRING</a></div><div class="ttdeci">#define LONG_STRING</div><div class="ttdef"><b>Definition:</b> <a href="dotlock_8c_source.html#l00063">dotlock.c:63</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_aeb2eca2d9521d236e2a5f4b90d1a4d36"><div class="ttname"><a href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a></div><div class="ttdeci">static struct nm_ctxdata * get_ctxdata(CONTEXT *ctx)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00483">mutt_notmuch.c:483</a></div></div>
<div class="ttc" id="globals_8h_html_a5b8a39403e0e06c8c9e1036744a0a048"><div class="ttname"><a href="globals_8h.html#a5b8a39403e0e06c8c9e1036744a0a048">Maildir</a></div><div class="ttdeci">WHERE char * Maildir</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00073">globals.h:73</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab722ea30f15cd50036124e58e3a2b3d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab722ea30f15cd50036124e58e3a2b3d3">&#9670;&nbsp;</a></span>nm_modify_message_tags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nm_modify_message_tags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCONTEXT.html">CONTEXT</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structHEADER.html">HEADER</a> *&#160;</td>
          <td class="paramname"><em>hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QWQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>YYY </td></tr>
    <tr><td class="paramname">hdr</td><td>YYY </td></tr>
    <tr><td class="paramname">buf</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<p>DESCRIPTION</p>
<p>Returns: int </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02311">2311</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;{</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;  <span class="keyword">struct </span><a class="code" href="structnm__ctxdata.html">nm_ctxdata</a> *data = <a class="code" href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a>(ctx);</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;  notmuch_database_t *<a class="code" href="structnm__ctxdata.html#a74cd41a27e48de6d5d9973b67c63f0ef">db</a> = <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;  notmuch_message_t *msg = <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  <span class="keywordtype">int</span> rc = -1;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;  <span class="keywordflow">if</span> (!buf || !*buf || !data)</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;  <span class="keywordflow">if</span> (!(db = <a class="code" href="mutt__notmuch_8c.html#a7d3f185f600e72777d7d55f7f977d574">get_db</a>(data, <a class="code" href="lib_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)) || !(msg = <a class="code" href="mutt__notmuch_8c.html#a3469f413b57c864b3842c999188829bb">get_nm_message</a>(db, hdr)))</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(1, (debugfile, <span class="stringliteral">&quot;nm: tags modify: &#39;%s&#39;\n&quot;</span>, buf));</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;  <a class="code" href="mutt__notmuch_8c.html#a745c6210b7b6364f6b052e34f0cfcd2b">update_tags</a>(msg, buf);</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;  <a class="code" href="mutt__notmuch_8c.html#a1c1da5b91d22da7c848f082ebed75a9f">update_header_flags</a>(ctx, hdr, buf);</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  <a class="code" href="mutt__notmuch_8c.html#a1e9366ab3904273a98cea42a523ced67">update_header_tags</a>(hdr, msg);</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;  <a class="code" href="curs__main_8c.html#ab909159318c3ae188c756be9465ee473">mutt_set_header_color</a>(ctx, hdr);</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;  rc = 0;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;  hdr-&gt;<a class="code" href="structHEADER.html#a53425558787fabe19a8dc010d4b50b9b">changed</a> = <a class="code" href="lib_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;done:</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="mutt__notmuch_8c.html#a6c2a6ea2b4fa59decf9a7218dd369842">is_longrun</a>(data))</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <a class="code" href="mutt__notmuch_8c.html#a50f772064f48d16e4ed972b6c6eaae63">release_db</a>(data);</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;  <span class="keywordflow">if</span> (hdr-&gt;<a class="code" href="structHEADER.html#a53425558787fabe19a8dc010d4b50b9b">changed</a>)</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    ctx-&gt;<a class="code" href="structCONTEXT.html#a457694c2f210ce8ae788131840ef03f6">mtime</a> = <a class="code" href="protos_8h.html#a023a060a6ec6f836453010baac84279e">time</a>(<a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(1, (debugfile, <span class="stringliteral">&quot;nm: tags modify done [rc=%d]\n&quot;</span>, rc));</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;}</div><div class="ttc" id="explodename_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="explodename_8c_source.html#l00034">explodename.c:34</a></div></div>
<div class="ttc" id="lib_8h_html_a5c75177122494450ca7234a1f4048711"><div class="ttname"><a href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a></div><div class="ttdeci">#define dprint(N, X)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00152">lib.h:152</a></div></div>
<div class="ttc" id="curs__main_8c_html_ab909159318c3ae188c756be9465ee473"><div class="ttname"><a href="curs__main_8c.html#ab909159318c3ae188c756be9465ee473">mutt_set_header_color</a></div><div class="ttdeci">void mutt_set_header_color(CONTEXT *ctx, HEADER *curhdr)</div><div class="ttdef"><b>Definition:</b> <a href="curs__main_8c_source.html#l03236">curs_main.c:3236</a></div></div>
<div class="ttc" id="structCONTEXT_html_a457694c2f210ce8ae788131840ef03f6"><div class="ttname"><a href="structCONTEXT.html#a457694c2f210ce8ae788131840ef03f6">CONTEXT::mtime</a></div><div class="ttdeci">time_t mtime</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l01014">mutt.h:1014</a></div></div>
<div class="ttc" id="structnm__ctxdata_html_a74cd41a27e48de6d5d9973b67c63f0ef"><div class="ttname"><a href="structnm__ctxdata.html#a74cd41a27e48de6d5d9973b67c63f0ef">nm_ctxdata::db</a></div><div class="ttdeci">notmuch_database_t * db</div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00145">mutt_notmuch.c:145</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a6c2a6ea2b4fa59decf9a7218dd369842"><div class="ttname"><a href="mutt__notmuch_8c.html#a6c2a6ea2b4fa59decf9a7218dd369842">is_longrun</a></div><div class="ttdeci">static int is_longrun(struct nm_ctxdata *data)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00866">mutt_notmuch.c:866</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a7d3f185f600e72777d7d55f7f977d574"><div class="ttname"><a href="mutt__notmuch_8c.html#a7d3f185f600e72777d7d55f7f977d574">get_db</a></div><div class="ttdeci">static notmuch_database_t * get_db(struct nm_ctxdata *data, int writable)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00765">mutt_notmuch.c:765</a></div></div>
<div class="ttc" id="protos_8h_html_a023a060a6ec6f836453010baac84279e"><div class="ttname"><a href="protos_8h.html#a023a060a6ec6f836453010baac84279e">time</a></div><div class="ttdeci">time_t time()</div></div>
<div class="ttc" id="structnm__ctxdata_html"><div class="ttname"><a href="structnm__ctxdata.html">nm_ctxdata</a></div><div class="ttdoc">NotMuch data attached to a context. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00143">mutt_notmuch.c:143</a></div></div>
<div class="ttc" id="lib_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="lib_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00057">lib.h:57</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a745c6210b7b6364f6b052e34f0cfcd2b"><div class="ttname"><a href="mutt__notmuch_8c.html#a745c6210b7b6364f6b052e34f0cfcd2b">update_tags</a></div><div class="ttdeci">static int update_tags(notmuch_message_t *msg, const char *tags)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l01603">mutt_notmuch.c:1603</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a50f772064f48d16e4ed972b6c6eaae63"><div class="ttname"><a href="mutt__notmuch_8c.html#a50f772064f48d16e4ed972b6c6eaae63">release_db</a></div><div class="ttdeci">static int release_db(struct nm_ctxdata *data)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00787">mutt_notmuch.c:787</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_aeb2eca2d9521d236e2a5f4b90d1a4d36"><div class="ttname"><a href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a></div><div class="ttdeci">static struct nm_ctxdata * get_ctxdata(CONTEXT *ctx)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00483">mutt_notmuch.c:483</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a1e9366ab3904273a98cea42a523ced67"><div class="ttname"><a href="mutt__notmuch_8c.html#a1e9366ab3904273a98cea42a523ced67">update_header_tags</a></div><div class="ttdeci">static int update_header_tags(HEADER *h, notmuch_message_t *msg)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l01006">mutt_notmuch.c:1006</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a1c1da5b91d22da7c848f082ebed75a9f"><div class="ttname"><a href="mutt__notmuch_8c.html#a1c1da5b91d22da7c848f082ebed75a9f">update_header_flags</a></div><div class="ttdeci">static int update_header_flags(CONTEXT *ctx, HEADER *hdr, const char *tags)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l01660">mutt_notmuch.c:1660</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a3469f413b57c864b3842c999188829bb"><div class="ttname"><a href="mutt__notmuch_8c.html#a3469f413b57c864b3842c999188829bb">get_nm_message</a></div><div class="ttdeci">static notmuch_message_t * get_nm_message(notmuch_database_t *db, HEADER *hdr)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l01581">mutt_notmuch.c:1581</a></div></div>
<div class="ttc" id="structHEADER_html_a53425558787fabe19a8dc010d4b50b9b"><div class="ttname"><a href="structHEADER.html#a53425558787fabe19a8dc010d4b50b9b">HEADER::changed</a></div><div class="ttdeci">unsigned int changed</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00831">mutt.h:831</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a972d1267792a1d646ecf3bf49d38ce00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a972d1267792a1d646ecf3bf49d38ce00">&#9670;&nbsp;</a></span>nm_query_window_backward()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nm_query_window_backward </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SHORT_DESC. </p>
<p>DESC </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02294">2294</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;{</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;  <span class="comment">//QWQ or ++ ?</span></div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  <a class="code" href="globals_8h.html#a3403ecb878bca1adc56e915d681c3e0d">NotmuchQueryWindowCurrentPosition</a> += 1;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(2, (debugfile, <span class="stringliteral">&quot;nm_query_window_backward (%d)\n&quot;</span>, <a class="code" href="globals_8h.html#a3403ecb878bca1adc56e915d681c3e0d">NotmuchQueryWindowCurrentPosition</a>));</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;}</div><div class="ttc" id="lib_8h_html_a5c75177122494450ca7234a1f4048711"><div class="ttname"><a href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a></div><div class="ttdeci">#define dprint(N, X)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00152">lib.h:152</a></div></div>
<div class="ttc" id="globals_8h_html_a3403ecb878bca1adc56e915d681c3e0d"><div class="ttname"><a href="globals_8h.html#a3403ecb878bca1adc56e915d681c3e0d">NotmuchQueryWindowCurrentPosition</a></div><div class="ttdeci">WHERE int NotmuchQueryWindowCurrentPosition</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00326">globals.h:326</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aea5430205d9c6c6cb5b5a71ff740fddb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea5430205d9c6c6cb5b5a71ff740fddb">&#9670;&nbsp;</a></span>nm_query_window_forward()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nm_query_window_forward </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SHORT_DESC. </p>
<p>DESC </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02280">2280</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;{</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;  <span class="comment">//QWQ or -- ?</span></div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="globals_8h.html#a3403ecb878bca1adc56e915d681c3e0d">NotmuchQueryWindowCurrentPosition</a> != 0)</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    <a class="code" href="globals_8h.html#a3403ecb878bca1adc56e915d681c3e0d">NotmuchQueryWindowCurrentPosition</a> -= 1;</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(2, (debugfile, <span class="stringliteral">&quot;nm_query_window_forward (%d)\n&quot;</span>, <a class="code" href="globals_8h.html#a3403ecb878bca1adc56e915d681c3e0d">NotmuchQueryWindowCurrentPosition</a>));</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;}</div><div class="ttc" id="lib_8h_html_a5c75177122494450ca7234a1f4048711"><div class="ttname"><a href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a></div><div class="ttdeci">#define dprint(N, X)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00152">lib.h:152</a></div></div>
<div class="ttc" id="globals_8h_html_a3403ecb878bca1adc56e915d681c3e0d"><div class="ttname"><a href="globals_8h.html#a3403ecb878bca1adc56e915d681c3e0d">NotmuchQueryWindowCurrentPosition</a></div><div class="ttdeci">WHERE int NotmuchQueryWindowCurrentPosition</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00326">globals.h:326</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab1b964bb1249214078c9ae2424e0df98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1b964bb1249214078c9ae2424e0df98">&#9670;&nbsp;</a></span>nm_longrun_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nm_longrun_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCONTEXT.html">CONTEXT</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>writable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QWQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>YYY </td></tr>
    <tr><td class="paramname">writable</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<p>DESCRIPTION </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02082">2082</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;{</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;  <span class="keyword">struct </span><a class="code" href="structnm__ctxdata.html">nm_ctxdata</a> *data = <a class="code" href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a>(ctx);</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;  <span class="keywordflow">if</span> (data &amp;&amp; <a class="code" href="mutt__notmuch_8c.html#a7d3f185f600e72777d7d55f7f977d574">get_db</a>(data, writable))</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  {</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    data-&gt;<a class="code" href="structnm__ctxdata.html#aaa49d26a3db6afa3b9d624c900f69dbe">longrun</a> = 1;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(2, (debugfile, <span class="stringliteral">&quot;nm: long run initialized\n&quot;</span>));</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;  }</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;}</div><div class="ttc" id="lib_8h_html_a5c75177122494450ca7234a1f4048711"><div class="ttname"><a href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a></div><div class="ttdeci">#define dprint(N, X)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00152">lib.h:152</a></div></div>
<div class="ttc" id="structnm__ctxdata_html_aaa49d26a3db6afa3b9d624c900f69dbe"><div class="ttname"><a href="structnm__ctxdata.html#aaa49d26a3db6afa3b9d624c900f69dbe">nm_ctxdata::longrun</a></div><div class="ttdeci">unsigned int longrun</div><div class="ttdoc">A long-lived action is in progress. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00159">mutt_notmuch.c:159</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a7d3f185f600e72777d7d55f7f977d574"><div class="ttname"><a href="mutt__notmuch_8c.html#a7d3f185f600e72777d7d55f7f977d574">get_db</a></div><div class="ttdeci">static notmuch_database_t * get_db(struct nm_ctxdata *data, int writable)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00765">mutt_notmuch.c:765</a></div></div>
<div class="ttc" id="structnm__ctxdata_html"><div class="ttname"><a href="structnm__ctxdata.html">nm_ctxdata</a></div><div class="ttdoc">NotMuch data attached to a context. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00143">mutt_notmuch.c:143</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_aeb2eca2d9521d236e2a5f4b90d1a4d36"><div class="ttname"><a href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a></div><div class="ttdeci">static struct nm_ctxdata * get_ctxdata(CONTEXT *ctx)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00483">mutt_notmuch.c:483</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a907ff1833c206352d4bfffd1f1a175b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a907ff1833c206352d4bfffd1f1a175b2">&#9670;&nbsp;</a></span>nm_longrun_done()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nm_longrun_done </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCONTEXT.html">CONTEXT</a> *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QWQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<p>DESCRIPTION </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02099">2099</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;{</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;  <span class="keyword">struct </span><a class="code" href="structnm__ctxdata.html">nm_ctxdata</a> *data = <a class="code" href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a>(ctx);</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  <span class="keywordflow">if</span> (data &amp;&amp; (<a class="code" href="mutt__notmuch_8c.html#a50f772064f48d16e4ed972b6c6eaae63">release_db</a>(data) == 0))</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(2, (debugfile, <span class="stringliteral">&quot;nm: long run deinitialized\n&quot;</span>));</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;}</div><div class="ttc" id="lib_8h_html_a5c75177122494450ca7234a1f4048711"><div class="ttname"><a href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a></div><div class="ttdeci">#define dprint(N, X)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00152">lib.h:152</a></div></div>
<div class="ttc" id="structnm__ctxdata_html"><div class="ttname"><a href="structnm__ctxdata.html">nm_ctxdata</a></div><div class="ttdoc">NotMuch data attached to a context. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00143">mutt_notmuch.c:143</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a50f772064f48d16e4ed972b6c6eaae63"><div class="ttname"><a href="mutt__notmuch_8c.html#a50f772064f48d16e4ed972b6c6eaae63">release_db</a></div><div class="ttdeci">static int release_db(struct nm_ctxdata *data)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00787">mutt_notmuch.c:787</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_aeb2eca2d9521d236e2a5f4b90d1a4d36"><div class="ttname"><a href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a></div><div class="ttdeci">static struct nm_ctxdata * get_ctxdata(CONTEXT *ctx)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00483">mutt_notmuch.c:483</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab02c0b78dd313bf44de75f601cb1cd7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab02c0b78dd313bf44de75f601cb1cd7c">&#9670;&nbsp;</a></span>nm_get_description()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nm_get_description </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCONTEXT.html">CONTEXT</a> *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QWQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<p>DESCRIPTION</p>
<p>Returns: char* </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02477">2477</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;{</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;  <a class="code" href="structBUFFY.html">BUFFY</a> *p;</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  <span class="keywordflow">for</span> (p = VirtIncoming; p; p = p-&gt;<a class="code" href="structBUFFY.html#ac714236d1c0c109a7589a333aaa80482">next</a>)</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;    <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structBUFFY.html#a0de3dc4a1032b94454907155b37b2ffd">desc</a> &amp;&amp; (strcmp(p-&gt;<a class="code" href="structBUFFY.html#a8429de735fde653f73bfe24144cbed0e">path</a>, ctx-&gt;<a class="code" href="structCONTEXT.html#a5dc77ea6580ac49ef1faf75e5bb85349">path</a>) == 0))</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;      <span class="keywordflow">return</span> p-&gt;<a class="code" href="structBUFFY.html#a0de3dc4a1032b94454907155b37b2ffd">desc</a>;</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;}</div><div class="ttc" id="explodename_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="explodename_8c_source.html#l00034">explodename.c:34</a></div></div>
<div class="ttc" id="structBUFFY_html_a8429de735fde653f73bfe24144cbed0e"><div class="ttname"><a href="structBUFFY.html#a8429de735fde653f73bfe24144cbed0e">BUFFY::path</a></div><div class="ttdeci">char path[_POSIX_PATH_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="buffy_8h_source.html#l00028">buffy.h:28</a></div></div>
<div class="ttc" id="structCONTEXT_html_a5dc77ea6580ac49ef1faf75e5bb85349"><div class="ttname"><a href="structCONTEXT.html#a5dc77ea6580ac49ef1faf75e5bb85349">CONTEXT::path</a></div><div class="ttdeci">char * path</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l01010">mutt.h:1010</a></div></div>
<div class="ttc" id="structBUFFY_html_ac714236d1c0c109a7589a333aaa80482"><div class="ttname"><a href="structBUFFY.html#ac714236d1c0c109a7589a333aaa80482">BUFFY::next</a></div><div class="ttdeci">struct buffy_t * next</div><div class="ttdef"><b>Definition:</b> <a href="buffy_8h_source.html#l00033">buffy.h:33</a></div></div>
<div class="ttc" id="structBUFFY_html_a0de3dc4a1032b94454907155b37b2ffd"><div class="ttname"><a href="structBUFFY.html#a0de3dc4a1032b94454907155b37b2ffd">BUFFY::desc</a></div><div class="ttdeci">char * desc</div><div class="ttdef"><b>Definition:</b> <a href="buffy_8h_source.html#l00031">buffy.h:31</a></div></div>
<div class="ttc" id="structBUFFY_html"><div class="ttname"><a href="structBUFFY.html">BUFFY</a></div><div class="ttdef"><b>Definition:</b> <a href="buffy_8h_source.html#l00026">buffy.h:26</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a37c8732ecbcde0ab4bfe0bdb44b72ab5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37c8732ecbcde0ab4bfe0bdb44b72ab5">&#9670;&nbsp;</a></span>nm_description_to_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nm_description_to_path </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="plural_8c.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bufsz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QWQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">desc</td><td>YYY </td></tr>
    <tr><td class="paramname">buf</td><td>YYY </td></tr>
    <tr><td class="paramname">bufsz</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<p>DESCRIPTION</p>
<p>Returns: int </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02498">2498</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;{</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;  <a class="code" href="structBUFFY.html">BUFFY</a> *p;</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;  <span class="keywordflow">if</span> (!desc || !buf || !bufsz)</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;    <span class="keywordflow">return</span> -EINVAL;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  <span class="keywordflow">for</span> (p = VirtIncoming; p; p = p-&gt;<a class="code" href="structBUFFY.html#ac714236d1c0c109a7589a333aaa80482">next</a>)</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structBUFFY.html#a0de3dc4a1032b94454907155b37b2ffd">desc</a> &amp;&amp; (strcmp(desc, p-&gt;<a class="code" href="structBUFFY.html#a0de3dc4a1032b94454907155b37b2ffd">desc</a>) == 0))</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    {</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;      strncpy(buf, p-&gt;<a class="code" href="structBUFFY.html#a8429de735fde653f73bfe24144cbed0e">path</a>, bufsz);</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;      buf[bufsz - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    }</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;  <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;}</div><div class="ttc" id="structBUFFY_html_a8429de735fde653f73bfe24144cbed0e"><div class="ttname"><a href="structBUFFY.html#a8429de735fde653f73bfe24144cbed0e">BUFFY::path</a></div><div class="ttdeci">char path[_POSIX_PATH_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="buffy_8h_source.html#l00028">buffy.h:28</a></div></div>
<div class="ttc" id="structBUFFY_html_ac714236d1c0c109a7589a333aaa80482"><div class="ttname"><a href="structBUFFY.html#ac714236d1c0c109a7589a333aaa80482">BUFFY::next</a></div><div class="ttdeci">struct buffy_t * next</div><div class="ttdef"><b>Definition:</b> <a href="buffy_8h_source.html#l00033">buffy.h:33</a></div></div>
<div class="ttc" id="structBUFFY_html_a0de3dc4a1032b94454907155b37b2ffd"><div class="ttname"><a href="structBUFFY.html#a0de3dc4a1032b94454907155b37b2ffd">BUFFY::desc</a></div><div class="ttdeci">char * desc</div><div class="ttdef"><b>Definition:</b> <a href="buffy_8h_source.html#l00031">buffy.h:31</a></div></div>
<div class="ttc" id="structBUFFY_html"><div class="ttname"><a href="structBUFFY.html">BUFFY</a></div><div class="ttdef"><b>Definition:</b> <a href="buffy_8h_source.html#l00026">buffy.h:26</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f0c16ca7afe0cafe89756eb62f78b7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f0c16ca7afe0cafe89756eb62f78b7c">&#9670;&nbsp;</a></span>nm_record_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nm_record_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCONTEXT.html">CONTEXT</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structHEADER.html">HEADER</a> *&#160;</td>
          <td class="paramname"><em>h</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QWQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>YYY </td></tr>
    <tr><td class="paramname">path</td><td>YYY </td></tr>
    <tr><td class="paramname">h</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<p>DESCRIPTION</p>
<p>Returns: int </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02526">2526</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;{</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;  notmuch_database_t *<a class="code" href="structnm__ctxdata.html#a74cd41a27e48de6d5d9973b67c63f0ef">db</a>;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;  notmuch_status_t st;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;  notmuch_message_t *msg = <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;  <span class="keywordtype">int</span> rc = -1, <a class="code" href="structnm__ctxdata.html#a12d9e71c61686c8a7ada7e4748a9a31e">trans</a>;</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;  <span class="keyword">struct </span><a class="code" href="structnm__ctxdata.html">nm_ctxdata</a> *data = <a class="code" href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a>(ctx);</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;  <span class="keywordflow">if</span> (!path || !data || (access(path, F_OK) != 0))</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  db = <a class="code" href="mutt__notmuch_8c.html#a7d3f185f600e72777d7d55f7f977d574">get_db</a>(data, <a class="code" href="lib_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  <span class="keywordflow">if</span> (!db)</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(1, (debugfile, <span class="stringliteral">&quot;nm: record message: %s\n&quot;</span>, path));</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;  <a class="code" href="structnm__ctxdata.html#a12d9e71c61686c8a7ada7e4748a9a31e">trans</a> = <a class="code" href="mutt__notmuch_8c.html#a3dd19151d56dee9fd5073914b3929316">db_trans_begin</a>(data);</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structnm__ctxdata.html#a12d9e71c61686c8a7ada7e4748a9a31e">trans</a> &lt; 0)</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;  st = notmuch_database_add_message(db, path, &amp;msg);</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;  <span class="keywordflow">if</span> ((st != NOTMUCH_STATUS_SUCCESS) &amp;&amp;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;      (st != NOTMUCH_STATUS_DUPLICATE_MESSAGE_ID))</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;  {</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(1, (debugfile, <span class="stringliteral">&quot;nm: failed to add &#39;%s&#39; [st=%d]\n&quot;</span>, path, (<span class="keywordtype">int</span>) st));</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  }</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  <span class="keywordflow">if</span> (st == NOTMUCH_STATUS_SUCCESS &amp;&amp; msg)</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;  {</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    notmuch_message_maildir_flags_to_tags(msg);</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    <span class="keywordflow">if</span> (h)</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;      <a class="code" href="mutt__notmuch_8c.html#a745c6210b7b6364f6b052e34f0cfcd2b">update_tags</a>(msg, <a class="code" href="mutt__notmuch_8c.html#a023d435097bfc4c60e313552a6468410">nm_header_get_tags</a>(h));</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="globals_8h.html#a2034c8dd97cb94450317683e7849a7e2">NotmuchRecordTags</a>)</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;      <a class="code" href="mutt__notmuch_8c.html#a745c6210b7b6364f6b052e34f0cfcd2b">update_tags</a>(msg, <a class="code" href="globals_8h.html#a2034c8dd97cb94450317683e7849a7e2">NotmuchRecordTags</a>);</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  }</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;  rc = 0;</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;done:</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;  <span class="keywordflow">if</span> (msg)</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;    notmuch_message_destroy(msg);</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structnm__ctxdata.html#a12d9e71c61686c8a7ada7e4748a9a31e">trans</a> == 1)</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    <a class="code" href="mutt__notmuch_8c.html#a9e4959085afd086e1ae28cddeb75add6">db_trans_end</a>(data);</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="mutt__notmuch_8c.html#a6c2a6ea2b4fa59decf9a7218dd369842">is_longrun</a>(data))</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;    <a class="code" href="mutt__notmuch_8c.html#a50f772064f48d16e4ed972b6c6eaae63">release_db</a>(data);</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;}</div><div class="ttc" id="explodename_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="explodename_8c_source.html#l00034">explodename.c:34</a></div></div>
<div class="ttc" id="structnm__ctxdata_html_a12d9e71c61686c8a7ada7e4748a9a31e"><div class="ttname"><a href="structnm__ctxdata.html#a12d9e71c61686c8a7ada7e4748a9a31e">nm_ctxdata::trans</a></div><div class="ttdeci">unsigned int trans</div><div class="ttdoc">Atomic transacion in progress. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00160">mutt_notmuch.c:160</a></div></div>
<div class="ttc" id="lib_8h_html_a5c75177122494450ca7234a1f4048711"><div class="ttname"><a href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a></div><div class="ttdeci">#define dprint(N, X)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00152">lib.h:152</a></div></div>
<div class="ttc" id="structnm__ctxdata_html_a74cd41a27e48de6d5d9973b67c63f0ef"><div class="ttname"><a href="structnm__ctxdata.html#a74cd41a27e48de6d5d9973b67c63f0ef">nm_ctxdata::db</a></div><div class="ttdeci">notmuch_database_t * db</div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00145">mutt_notmuch.c:145</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a6c2a6ea2b4fa59decf9a7218dd369842"><div class="ttname"><a href="mutt__notmuch_8c.html#a6c2a6ea2b4fa59decf9a7218dd369842">is_longrun</a></div><div class="ttdeci">static int is_longrun(struct nm_ctxdata *data)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00866">mutt_notmuch.c:866</a></div></div>
<div class="ttc" id="globals_8h_html_a2034c8dd97cb94450317683e7849a7e2"><div class="ttname"><a href="globals_8h.html#a2034c8dd97cb94450317683e7849a7e2">NotmuchRecordTags</a></div><div class="ttdeci">WHERE char * NotmuchRecordTags</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00323">globals.h:323</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a7d3f185f600e72777d7d55f7f977d574"><div class="ttname"><a href="mutt__notmuch_8c.html#a7d3f185f600e72777d7d55f7f977d574">get_db</a></div><div class="ttdeci">static notmuch_database_t * get_db(struct nm_ctxdata *data, int writable)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00765">mutt_notmuch.c:765</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a9e4959085afd086e1ae28cddeb75add6"><div class="ttname"><a href="mutt__notmuch_8c.html#a9e4959085afd086e1ae28cddeb75add6">db_trans_end</a></div><div class="ttdeci">static int db_trans_end(struct nm_ctxdata *data)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00842">mutt_notmuch.c:842</a></div></div>
<div class="ttc" id="structnm__ctxdata_html"><div class="ttname"><a href="structnm__ctxdata.html">nm_ctxdata</a></div><div class="ttdoc">NotMuch data attached to a context. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00143">mutt_notmuch.c:143</a></div></div>
<div class="ttc" id="lib_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="lib_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00057">lib.h:57</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a745c6210b7b6364f6b052e34f0cfcd2b"><div class="ttname"><a href="mutt__notmuch_8c.html#a745c6210b7b6364f6b052e34f0cfcd2b">update_tags</a></div><div class="ttdeci">static int update_tags(notmuch_message_t *msg, const char *tags)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l01603">mutt_notmuch.c:1603</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a023d435097bfc4c60e313552a6468410"><div class="ttname"><a href="mutt__notmuch_8c.html#a023d435097bfc4c60e313552a6468410">nm_header_get_tags</a></div><div class="ttdeci">char * nm_header_get_tags(HEADER *h)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l02030">mutt_notmuch.c:2030</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a50f772064f48d16e4ed972b6c6eaae63"><div class="ttname"><a href="mutt__notmuch_8c.html#a50f772064f48d16e4ed972b6c6eaae63">release_db</a></div><div class="ttdeci">static int release_db(struct nm_ctxdata *data)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00787">mutt_notmuch.c:787</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_aeb2eca2d9521d236e2a5f4b90d1a4d36"><div class="ttname"><a href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a></div><div class="ttdeci">static struct nm_ctxdata * get_ctxdata(CONTEXT *ctx)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00483">mutt_notmuch.c:483</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a3dd19151d56dee9fd5073914b3929316"><div class="ttname"><a href="mutt__notmuch_8c.html#a3dd19151d56dee9fd5073914b3929316">db_trans_begin</a></div><div class="ttdeci">static int db_trans_begin(struct nm_ctxdata *data)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00817">mutt_notmuch.c:817</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adf7ad9f9c4e362ca42128100a2d3f5b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf7ad9f9c4e362ca42128100a2d3f5b6">&#9670;&nbsp;</a></span>nm_debug_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nm_debug_check </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCONTEXT.html">CONTEXT</a> *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QWQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<p>DESCRIPTION </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02113">2113</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;{</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;  <span class="comment">//QWQ WHAT IS THIS FUNCTION FOR?</span></div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  <span class="keyword">struct </span><a class="code" href="structnm__ctxdata.html">nm_ctxdata</a> *data = <a class="code" href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a>(ctx);</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  <span class="keywordflow">if</span> (!data)</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;  <span class="keywordflow">if</span> (data-&gt;<a class="code" href="structnm__ctxdata.html#a74cd41a27e48de6d5d9973b67c63f0ef">db</a>)</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;  {</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(1, (debugfile, <span class="stringliteral">&quot;nm: ERROR: db is open, closing\n&quot;</span>));</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <a class="code" href="mutt__notmuch_8c.html#a50f772064f48d16e4ed972b6c6eaae63">release_db</a>(data);</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  }</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;}</div><div class="ttc" id="lib_8h_html_a5c75177122494450ca7234a1f4048711"><div class="ttname"><a href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a></div><div class="ttdeci">#define dprint(N, X)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00152">lib.h:152</a></div></div>
<div class="ttc" id="structnm__ctxdata_html_a74cd41a27e48de6d5d9973b67c63f0ef"><div class="ttname"><a href="structnm__ctxdata.html#a74cd41a27e48de6d5d9973b67c63f0ef">nm_ctxdata::db</a></div><div class="ttdeci">notmuch_database_t * db</div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00145">mutt_notmuch.c:145</a></div></div>
<div class="ttc" id="structnm__ctxdata_html"><div class="ttname"><a href="structnm__ctxdata.html">nm_ctxdata</a></div><div class="ttdoc">NotMuch data attached to a context. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00143">mutt_notmuch.c:143</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a50f772064f48d16e4ed972b6c6eaae63"><div class="ttname"><a href="mutt__notmuch_8c.html#a50f772064f48d16e4ed972b6c6eaae63">release_db</a></div><div class="ttdeci">static int release_db(struct nm_ctxdata *data)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00787">mutt_notmuch.c:787</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_aeb2eca2d9521d236e2a5f4b90d1a4d36"><div class="ttname"><a href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a></div><div class="ttdeci">static struct nm_ctxdata * get_ctxdata(CONTEXT *ctx)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00483">mutt_notmuch.c:483</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a18c7ca83f161ea23f087710a71de210b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18c7ca83f161ea23f087710a71de210b">&#9670;&nbsp;</a></span>nm_get_all_tags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nm_get_all_tags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCONTEXT.html">CONTEXT</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>tag_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>tag_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QWQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>YYY </td></tr>
    <tr><td class="paramname">tag_list</td><td>YYY </td></tr>
    <tr><td class="paramname">tag_count</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<p>Fill a list with all notmuch tags.</p>
<p>If tag_list is NULL, just count the tags.</p>
<p>Returns: int </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02586">2586</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;{</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  <span class="keyword">struct </span><a class="code" href="structnm__ctxdata.html">nm_ctxdata</a> *data = <a class="code" href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a>(ctx);</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;  notmuch_database_t *<a class="code" href="structnm__ctxdata.html#a74cd41a27e48de6d5d9973b67c63f0ef">db</a> = <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;  notmuch_tags_t *tags = <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;  <span class="keywordtype">int</span> rc = -1;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;  <span class="keywordflow">if</span> (!data)</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;  <span class="keywordflow">if</span> (!(db = <a class="code" href="mutt__notmuch_8c.html#a7d3f185f600e72777d7d55f7f977d574">get_db</a>(data, <a class="code" href="lib_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)) ||</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;      !(tags = notmuch_database_get_all_tags(db)))</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;  *tag_count = 0;</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(1, (debugfile, <span class="stringliteral">&quot;nm: get all tags\n&quot;</span>));</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;  <span class="keywordflow">while</span> (notmuch_tags_valid(tags))</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;  {</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    <span class="keywordflow">if</span> (tag_list != <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;    {</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;      tag_list[*tag_count] = <a class="code" href="lib_8c.html#a26d804f329dea2733da34a4953a22a9d">safe_strdup</a>(notmuch_tags_get(tags));</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    }</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    (*tag_count)++;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    notmuch_tags_move_to_next(tags);</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;  }</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;  rc = 0;</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;done:</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;  <span class="keywordflow">if</span> (tags)</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;    notmuch_tags_destroy(tags);</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="mutt__notmuch_8c.html#a6c2a6ea2b4fa59decf9a7218dd369842">is_longrun</a>(data))</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;    <a class="code" href="mutt__notmuch_8c.html#a50f772064f48d16e4ed972b6c6eaae63">release_db</a>(data);</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(1, (debugfile, <span class="stringliteral">&quot;nm: get all tags done [rc=%d tag_count=%u]\n&quot;</span>, rc,</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;             *tag_count));</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;}</div><div class="ttc" id="lib_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="lib_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00058">lib.h:58</a></div></div>
<div class="ttc" id="explodename_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="explodename_8c_source.html#l00034">explodename.c:34</a></div></div>
<div class="ttc" id="lib_8h_html_a5c75177122494450ca7234a1f4048711"><div class="ttname"><a href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a></div><div class="ttdeci">#define dprint(N, X)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00152">lib.h:152</a></div></div>
<div class="ttc" id="structnm__ctxdata_html_a74cd41a27e48de6d5d9973b67c63f0ef"><div class="ttname"><a href="structnm__ctxdata.html#a74cd41a27e48de6d5d9973b67c63f0ef">nm_ctxdata::db</a></div><div class="ttdeci">notmuch_database_t * db</div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00145">mutt_notmuch.c:145</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a6c2a6ea2b4fa59decf9a7218dd369842"><div class="ttname"><a href="mutt__notmuch_8c.html#a6c2a6ea2b4fa59decf9a7218dd369842">is_longrun</a></div><div class="ttdeci">static int is_longrun(struct nm_ctxdata *data)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00866">mutt_notmuch.c:866</a></div></div>
<div class="ttc" id="lib_8c_html_a26d804f329dea2733da34a4953a22a9d"><div class="ttname"><a href="lib_8c.html#a26d804f329dea2733da34a4953a22a9d">safe_strdup</a></div><div class="ttdeci">char * safe_strdup(const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8c_source.html#l00234">lib.c:234</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a7d3f185f600e72777d7d55f7f977d574"><div class="ttname"><a href="mutt__notmuch_8c.html#a7d3f185f600e72777d7d55f7f977d574">get_db</a></div><div class="ttdeci">static notmuch_database_t * get_db(struct nm_ctxdata *data, int writable)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00765">mutt_notmuch.c:765</a></div></div>
<div class="ttc" id="structnm__ctxdata_html"><div class="ttname"><a href="structnm__ctxdata.html">nm_ctxdata</a></div><div class="ttdoc">NotMuch data attached to a context. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00143">mutt_notmuch.c:143</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a50f772064f48d16e4ed972b6c6eaae63"><div class="ttname"><a href="mutt__notmuch_8c.html#a50f772064f48d16e4ed972b6c6eaae63">release_db</a></div><div class="ttdeci">static int release_db(struct nm_ctxdata *data)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00787">mutt_notmuch.c:787</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_aeb2eca2d9521d236e2a5f4b90d1a4d36"><div class="ttname"><a href="mutt__notmuch_8c.html#aeb2eca2d9521d236e2a5f4b90d1a4d36">get_ctxdata</a></div><div class="ttdeci">static struct nm_ctxdata * get_ctxdata(CONTEXT *ctx)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00483">mutt_notmuch.c:483</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a48bd6f05c808710d89e223077d5dc7af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48bd6f05c808710d89e223077d5dc7af">&#9670;&nbsp;</a></span>nm_nonctx_get_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nm_nonctx_get_count </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>all</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>new</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QWQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>YYY </td></tr>
    <tr><td class="paramname">all</td><td>YYY </td></tr>
    <tr><td class="paramname">new</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<p>DESCRIPTION</p>
<p>Returns: int </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02387">2387</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;{</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;  <span class="keyword">struct </span><a class="code" href="structuri__tag.html">uri_tag</a> *query_items = <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *item;</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;  <span class="keywordtype">char</span> *db_filename = <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *db_query = <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;  notmuch_database_t *db = <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;  <span class="keywordtype">int</span> rc = -1, dflt = 0;</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(1, (debugfile, <span class="stringliteral">&quot;nm: count\n&quot;</span>));</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="mutt__notmuch_8c.html#aa4f1b6ce7b277ea5e941d93c8ae3d6b4">url_parse_query</a>(path, &amp;db_filename, &amp;query_items))</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;  {</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    <a class="code" href="extlib_8c.html#a90829ddbd5f0edf736c9f6e595cfc0be">mutt_error</a>(<a class="code" href="lib_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a>(<span class="stringliteral">&quot;failed to parse notmuch uri: %s&quot;</span>), path);</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;  }</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  <span class="keywordflow">if</span> (!query_items)</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  <span class="keywordflow">for</span> (item = query_items; item; item = item-&gt;<a class="code" href="structuri__tag.html#ab73355f62dcbd45b3edd0531db46198c">next</a>)</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;  {</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    <span class="keywordflow">if</span> (item-&gt;value &amp;&amp; (strcmp(item-&gt;name, <span class="stringliteral">&quot;query&quot;</span>) == 0))</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    {</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;      db_query = item-&gt;value;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    }</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  }</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  <span class="keywordflow">if</span> (!db_query)</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;  <span class="keywordflow">if</span> (!db_filename)</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  {</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="globals_8h.html#a245ecf18d736d621042b81b48d1436b5">NotmuchDefaultUri</a>)</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    {</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;      <span class="keywordflow">if</span> (strncmp(<a class="code" href="globals_8h.html#a245ecf18d736d621042b81b48d1436b5">NotmuchDefaultUri</a>, <span class="stringliteral">&quot;notmuch://&quot;</span>, 10) == 0)</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;        db_filename = <a class="code" href="globals_8h.html#a245ecf18d736d621042b81b48d1436b5">NotmuchDefaultUri</a> + 10;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;        db_filename = <a class="code" href="globals_8h.html#a245ecf18d736d621042b81b48d1436b5">NotmuchDefaultUri</a>;</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    }</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="globals_8h.html#a5b8a39403e0e06c8c9e1036744a0a048">Maildir</a>)</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;      db_filename = <a class="code" href="globals_8h.html#a5b8a39403e0e06c8c9e1036744a0a048">Maildir</a>;</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    dflt = 1;</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;  }</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;  <span class="comment">/* don&#39;t be verbose about connection, as we&#39;re called from</span></div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;<span class="comment">   * sidebar/buffy very often */</span></div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;  db = <a class="code" href="mutt__notmuch_8c.html#a5791c1e5dde4a4f8e2d1925df1ba0291">do_database_open</a>(db_filename, <a class="code" href="lib_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="lib_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;  <span class="keywordflow">if</span> (!db)</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;    <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;  <span class="comment">/* all emails */</span></div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;  <span class="keywordflow">if</span> (all)</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    *all = <a class="code" href="mutt__notmuch_8c.html#addafbaf95eaa8a3a86ce3c043b79ff01">count_query</a>(db, db_query);</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;  <span class="comment">/* new messages */</span></div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">new</span>)</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;  {</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    <span class="keywordtype">char</span> *qstr;</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    <a class="code" href="lib_8h.html#ad1a388959f6ee550c4a75ae7b1e93a16">safe_asprintf</a>(&amp;qstr, <span class="stringliteral">&quot;( %s ) tag:%s&quot;</span>, db_query, <a class="code" href="globals_8h.html#ae29008f192fd9763db52fee0501a4015">NotmuchUnreadTag</a>);</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    *<span class="keyword">new</span> = <a class="code" href="mutt__notmuch_8c.html#addafbaf95eaa8a3a86ce3c043b79ff01">count_query</a>(db, qstr);</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    <a class="code" href="lib_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;qstr);</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;  }</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;  rc = 0;</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;done:</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;  <span class="keywordflow">if</span> (db)</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;  {</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;<span class="preprocessor">#ifdef NOTMUCH_API_3</span></div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    notmuch_database_destroy(db);</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    notmuch_database_close(db);</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(1, (debugfile, <span class="stringliteral">&quot;nm: count close DB\n&quot;</span>));</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;  }</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;  <span class="keywordflow">if</span> (!dflt)</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;    <a class="code" href="lib_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a>(&amp;db_filename);</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  <a class="code" href="mutt__notmuch_8c.html#a4d34553f4edd88c6108c0fe6397e35bc">url_free_tags</a>(query_items);</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;  <a class="code" href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a>(1, (debugfile, <span class="stringliteral">&quot;nm: count done [rc=%d]\n&quot;</span>, rc));</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;  <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;}</div><div class="ttc" id="structuri__tag_html"><div class="ttname"><a href="structuri__tag.html">uri_tag</a></div><div class="ttdoc">Parsed NotMuch-URI arguments. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00096">mutt_notmuch.c:96</a></div></div>
<div class="ttc" id="lib_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="lib_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00058">lib.h:58</a></div></div>
<div class="ttc" id="explodename_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="explodename_8c_source.html#l00034">explodename.c:34</a></div></div>
<div class="ttc" id="lib_8h_html_a5c75177122494450ca7234a1f4048711"><div class="ttname"><a href="lib_8h.html#a5c75177122494450ca7234a1f4048711">dprint</a></div><div class="ttdeci">#define dprint(N, X)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00152">lib.h:152</a></div></div>
<div class="ttc" id="globals_8h_html_a245ecf18d736d621042b81b48d1436b5"><div class="ttname"><a href="globals_8h.html#a245ecf18d736d621042b81b48d1436b5">NotmuchDefaultUri</a></div><div class="ttdeci">WHERE char * NotmuchDefaultUri</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00316">globals.h:316</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a5791c1e5dde4a4f8e2d1925df1ba0291"><div class="ttname"><a href="mutt__notmuch_8c.html#a5791c1e5dde4a4f8e2d1925df1ba0291">do_database_open</a></div><div class="ttdeci">static notmuch_database_t * do_database_open(const char *filename, int writable, int verbose)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00715">mutt_notmuch.c:715</a></div></div>
<div class="ttc" id="lib_8h_html_a25875003b43b81a4302256caa4a13599"><div class="ttname"><a href="lib_8h.html#a25875003b43b81a4302256caa4a13599">FREE</a></div><div class="ttdeci">#define FREE(x)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00077">lib.h:77</a></div></div>
<div class="ttc" id="lib_8h_html_ad1a388959f6ee550c4a75ae7b1e93a16"><div class="ttname"><a href="lib_8h.html#ad1a388959f6ee550c4a75ae7b1e93a16">safe_asprintf</a></div><div class="ttdeci">int safe_asprintf(char **, const char *,...)</div><div class="ttdef"><b>Definition:</b> <a href="safe__asprintf_8c_source.html#l00059">safe_asprintf.c:59</a></div></div>
<div class="ttc" id="extlib_8c_html_a90829ddbd5f0edf736c9f6e595cfc0be"><div class="ttname"><a href="extlib_8c.html#a90829ddbd5f0edf736c9f6e595cfc0be">mutt_error</a></div><div class="ttdeci">void(* mutt_error)(const char *,...)</div><div class="ttdef"><b>Definition:</b> <a href="extlib_8c_source.html#l00037">extlib.c:37</a></div></div>
<div class="ttc" id="globals_8h_html_ae29008f192fd9763db52fee0501a4015"><div class="ttname"><a href="globals_8h.html#ae29008f192fd9763db52fee0501a4015">NotmuchUnreadTag</a></div><div class="ttdeci">WHERE char * NotmuchUnreadTag</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00318">globals.h:318</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_a4d34553f4edd88c6108c0fe6397e35bc"><div class="ttname"><a href="mutt__notmuch_8c.html#a4d34553f4edd88c6108c0fe6397e35bc">url_free_tags</a></div><div class="ttdeci">static void url_free_tags(struct uri_tag *tags)</div><div class="ttdoc">Free a list of tags. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00212">mutt_notmuch.c:212</a></div></div>
<div class="ttc" id="lib_8h_html_a479d658dfd60fe8d9709ec67a58b34ca"><div class="ttname"><a href="lib_8h.html#a479d658dfd60fe8d9709ec67a58b34ca">_</a></div><div class="ttdeci">#define _(a)</div><div class="ttdef"><b>Definition:</b> <a href="lib_8h_source.html#l00046">lib.h:46</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_addafbaf95eaa8a3a86ce3c043b79ff01"><div class="ttname"><a href="mutt__notmuch_8c.html#addafbaf95eaa8a3a86ce3c043b79ff01">count_query</a></div><div class="ttdeci">static unsigned count_query(notmuch_database_t *db, const char *qstr)</div><div class="ttdoc">QWQ. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l01941">mutt_notmuch.c:1941</a></div></div>
<div class="ttc" id="globals_8h_html_a5b8a39403e0e06c8c9e1036744a0a048"><div class="ttname"><a href="globals_8h.html#a5b8a39403e0e06c8c9e1036744a0a048">Maildir</a></div><div class="ttdeci">WHERE char * Maildir</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00073">globals.h:73</a></div></div>
<div class="ttc" id="mutt__notmuch_8c_html_aa4f1b6ce7b277ea5e941d93c8ae3d6b4"><div class="ttname"><a href="mutt__notmuch_8c.html#aa4f1b6ce7b277ea5e941d93c8ae3d6b4">url_parse_query</a></div><div class="ttdeci">static int url_parse_query(char *url, char **filename, struct uri_tag **tags)</div><div class="ttdoc">Extract the tokens from a query URI. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00240">mutt_notmuch.c:240</a></div></div>
<div class="ttc" id="structuri__tag_html_ab73355f62dcbd45b3edd0531db46198c"><div class="ttname"><a href="structuri__tag.html#ab73355f62dcbd45b3edd0531db46198c">uri_tag::next</a></div><div class="ttdeci">struct uri_tag * next</div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00100">mutt_notmuch.c:100</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a74f775476a4184c7f7e1e114b847a7e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74f775476a4184c7f7e1e114b847a7e1">&#9670;&nbsp;</a></span>nm_header_get_tag_transformed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nm_header_get_tag_transformed </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structHEADER.html">HEADER</a> *&#160;</td>
          <td class="paramname"><em>h</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QWQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tag</td><td>YYY </td></tr>
    <tr><td class="paramname">h</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<p>DESCRIPTION</p>
<p>Returns: char* </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02057">2057</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;{</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;  <span class="keyword">struct </span><a class="code" href="structnm__hdrtag.html">nm_hdrtag</a> *tmp;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;  <span class="keywordflow">if</span> (!h || !h-&gt;<a class="code" href="structHEADER.html#a52ae60422d473becdf88a6b5a570c5a9">data</a>)</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <span class="keywordflow">for</span> (tmp = ((<span class="keyword">struct</span> <a class="code" href="structnm__hdrdata.html">nm_hdrdata</a> *) h-&gt;<a class="code" href="structHEADER.html#a52ae60422d473becdf88a6b5a570c5a9">data</a>)-&gt;tag_list;</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;       tmp != <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;       tmp = tmp-&gt;<a class="code" href="structnm__hdrtag.html#aaca44fbf315130db00038b38db97d461">next</a>)</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;  {</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    <span class="keywordflow">if</span> (strcmp(<a class="code" href="structnm__hdrtag.html#a4c9d8b77a8f5dc065164828e369c9b21">tag</a>, tmp-&gt;<a class="code" href="structnm__hdrtag.html#a4c9d8b77a8f5dc065164828e369c9b21">tag</a>) == 0)</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      <span class="keywordflow">return</span> tmp-&gt;<a class="code" href="structnm__hdrtag.html#a4a62413763d44b3d8dd11e26a2fbd52b">transformed</a>;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;  }</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;}</div><div class="ttc" id="explodename_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="explodename_8c_source.html#l00034">explodename.c:34</a></div></div>
<div class="ttc" id="structnm__hdrdata_html"><div class="ttname"><a href="structnm__hdrdata.html">nm_hdrdata</a></div><div class="ttdoc">NotMuch data attached to an email. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00125">mutt_notmuch.c:125</a></div></div>
<div class="ttc" id="structHEADER_html_a52ae60422d473becdf88a6b5a570c5a9"><div class="ttname"><a href="structHEADER.html#a52ae60422d473becdf88a6b5a570c5a9">HEADER::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00897">mutt.h:897</a></div></div>
<div class="ttc" id="structnm__hdrtag_html"><div class="ttname"><a href="structnm__hdrtag.html">nm_hdrtag</a></div><div class="ttdoc">NotMuch Mail Header Tags. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00111">mutt_notmuch.c:111</a></div></div>
<div class="ttc" id="structnm__hdrtag_html_a4a62413763d44b3d8dd11e26a2fbd52b"><div class="ttname"><a href="structnm__hdrtag.html#a4a62413763d44b3d8dd11e26a2fbd52b">nm_hdrtag::transformed</a></div><div class="ttdeci">char * transformed</div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00114">mutt_notmuch.c:114</a></div></div>
<div class="ttc" id="structnm__hdrtag_html_aaca44fbf315130db00038b38db97d461"><div class="ttname"><a href="structnm__hdrtag.html#aaca44fbf315130db00038b38db97d461">nm_hdrtag::next</a></div><div class="ttdeci">struct nm_hdrtag * next</div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00115">mutt_notmuch.c:115</a></div></div>
<div class="ttc" id="structnm__hdrtag_html_a4c9d8b77a8f5dc065164828e369c9b21"><div class="ttname"><a href="structnm__hdrtag.html#a4c9d8b77a8f5dc065164828e369c9b21">nm_hdrtag::tag</a></div><div class="ttdeci">char * tag</div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00113">mutt_notmuch.c:113</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a86e55cea77b9527a3f83b336de4e8eb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86e55cea77b9527a3f83b336de4e8eb1">&#9670;&nbsp;</a></span>nm_header_get_tags_transformed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nm_header_get_tags_transformed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structHEADER.html">HEADER</a> *&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QWQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<p>DESCRIPTION</p>
<p>Returns: char* </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02043">2043</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;{</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;  <span class="keywordflow">return</span> (h &amp;&amp; h-&gt;<a class="code" href="structHEADER.html#a52ae60422d473becdf88a6b5a570c5a9">data</a>) ? ((<span class="keyword">struct </span><a class="code" href="structnm__hdrdata.html">nm_hdrdata</a> *) h-&gt;<a class="code" href="structHEADER.html#a52ae60422d473becdf88a6b5a570c5a9">data</a>)-&gt;tags_transformed : <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;}</div><div class="ttc" id="explodename_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="explodename_8c_source.html#l00034">explodename.c:34</a></div></div>
<div class="ttc" id="structnm__hdrdata_html"><div class="ttname"><a href="structnm__hdrdata.html">nm_hdrdata</a></div><div class="ttdoc">NotMuch data attached to an email. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00125">mutt_notmuch.c:125</a></div></div>
<div class="ttc" id="structHEADER_html_a52ae60422d473becdf88a6b5a570c5a9"><div class="ttname"><a href="structHEADER.html#a52ae60422d473becdf88a6b5a570c5a9">HEADER::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00897">mutt.h:897</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a023d435097bfc4c60e313552a6468410"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a023d435097bfc4c60e313552a6468410">&#9670;&nbsp;</a></span>nm_header_get_tags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nm_header_get_tags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structHEADER.html">HEADER</a> *&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>QWQ. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>YYY</td></tr>
  </table>
  </dd>
</dl>
<p>returns all unhidden tags</p>
<p>Returns: char* </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l02030">2030</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;{</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  <span class="keywordflow">return</span> (h &amp;&amp; h-&gt;<a class="code" href="structHEADER.html#a52ae60422d473becdf88a6b5a570c5a9">data</a>) ? ((<span class="keyword">struct </span><a class="code" href="structnm__hdrdata.html">nm_hdrdata</a> *) h-&gt;<a class="code" href="structHEADER.html#a52ae60422d473becdf88a6b5a570c5a9">data</a>)-&gt;tags : <a class="code" href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;}</div><div class="ttc" id="explodename_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="explodename_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="explodename_8c_source.html#l00034">explodename.c:34</a></div></div>
<div class="ttc" id="structnm__hdrdata_html"><div class="ttname"><a href="structnm__hdrdata.html">nm_hdrdata</a></div><div class="ttdoc">NotMuch data attached to an email. </div><div class="ttdef"><b>Definition:</b> <a href="mutt__notmuch_8c_source.html#l00125">mutt_notmuch.c:125</a></div></div>
<div class="ttc" id="structHEADER_html_a52ae60422d473becdf88a6b5a570c5a9"><div class="ttname"><a href="structHEADER.html#a52ae60422d473becdf88a6b5a570c5a9">HEADER::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="mutt_8h_source.html#l00897">mutt.h:897</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a16e62ec8e0ec6fbc4b25d592d7ba940a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16e62ec8e0ec6fbc4b25d592d7ba940a">&#9670;&nbsp;</a></span>mx_notmuch_ops</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmx__ops.html">mx_ops</a> mx_notmuch_ops</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mailbox API. </p>
<p>These functions are common to all mailbox types. </p>

<p class="definition">Definition at line <a class="el" href="mutt__notmuch_8c_source.html#l03007">3007</a> of file <a class="el" href="mutt__notmuch_8c_source.html">mutt_notmuch.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
